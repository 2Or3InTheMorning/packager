{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/packager/brand.js","webpack:///./src/packager/downloader.worker.js","webpack:///./src/packager/checksum.worker.js","webpack:///./src/packager/lib/merge.js","webpack:///./src/packager/lib/serialize.js","webpack:///./src/packager/persistent-store.js","webpack:///./src/locales/index.js","webpack:///ComplexMessage.svelte","webpack:///Section.svelte","webpack:///Button.svelte","webpack:///./src/packager/stores.js","webpack:///./src/packager/errors.js","webpack:///./src/packager/lib/readers.js","webpack:///./src/packager/lib/xhr.js","webpack:///./src/packager/load-project.js","webpack:///./src/packager/lib/get-project-meta.js","webpack:///./src/packager/lib/url-utils.js","webpack:///SelectProject.svelte","webpack:///ImageInput.svelte","webpack:///CustomExtensions.svelte","webpack:///./src/packager/default-icon.png","webpack:///./src/packager/large-assets.js","webpack:///./src/packager/lib/icns.js","webpack:///./src/packager/lib/build-id.js","webpack:///./src/packager/lib/idb.js","webpack:///./src/packager/cache.js","webpack:///./src/packager/lib/base85-encode.js","webpack:///./src/packager/packager.js","webpack:///./src/packager/file-store.js","webpack:///./src/packager/preview.js","webpack:///./src/packager/lib/deep-clone.js","webpack:///PackagerOptions.svelte","webpack:///Progress.svelte","webpack:///SelectLocale.svelte","webpack:///P4.svelte","webpack:///./src/packager/sw.js","webpack:///./src/packager/analytics.js","webpack:///./src/packager/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","3","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","APP_NAME","SOURCE_CODE","FEEDBACK_SCRATCH","FEEDBACK_GITHUB","Worker","obj","Array","isArray","merge","into","from","typeInto","keys","serialize","defaultValue","Blob","v","serialized","a","b","areArraysEqual","JSON","parse","stringify","localValue","localStorage","getItem","store","subscribe","removeItem","setItem","unstructure","messages","string","englishMessages","allMessages","en","supportedLocales","locale","navigator","language","toLowerCase","split","find","documentElement","lang","getProperty","id","parts","translate","localMessages","el","values","build","firstChild","removeChild","part","createTextNode","node","href","textContent","text","warn","unsubscribe","then","caption","modal","accent","disabled","secondary","danger","progress","visible","reset","set","UserError","readAsArrayBuffer","fr","FileReader","clampProgress","Math","max","min","url","progressCallback","estimatedSize","xhr","XMLHttpRequest","status","response","onprogress","lengthComputable","loaded","total","responseType","open","send","abort","downloadProject","async","buffer","worker","wrap","project","terminate","fromURL","file","title","extractProjectId","match","projectData","projectId","projectUrl","files","load","$progress","uniqueId","projectTitle","$_","replace","$type","$projectId","$projectUrl","str","URL","protocol","isValidURL","getTitleFromURL","$error","getDisplayedProjectURL","blur","select","ACCEPT","dragging","revokeObjectURL","createObjectURL","stopPropagation","input","accept","join","addEventListener","body","click","remove","dataTransfer","types","includes","preventDefault","droppedFile","some","ext","endsWith","customExtensions","map","filter","LARGE_ASSET_BASE","sha256","scaffolding","SCAFFOLDING_ROOT","useBuildId","addons","canvasToBlob","canvas","toBlob","blob","pngData","Icns","Buffer","pngDataBlob","image","Image","eligibleFormats","size","format","width","height","ctx","getContext","icns","formatSize","drawImage","arrayBuffer","icnsImage","IcnsImage","fromPNG","append","SCAFFOLDING_BUILD_ID","Database","version","storeName","this","db","indexedDB","userAgentData","test","userAgent","databases","intervalId","tryIdb","finally","setInterval","clearInterval","idbReady","onupgradeneeded","createObjectStore","keyPath","onsuccess","onopen","catch","readwrite","transaction","objectStore","createTransaction","setTransactionErrorHandler","openCursor","cursor","delete","continue","getAssetId","asset","allValidAssetIds","assetId","content","put","deleteEverything","decode","getValue","code","lengthEndsAt","indexOf","byteLength","substring","resultBuffer","ArrayBuffer","resultView","Uint32Array","charCodeAt","Uint8Array","escapeXML","getJSZip","default","setFileFast","zip","path","COPYRIGHT_HEADER","APPEND_TO_CREDITS_HTML","super","options","DEFAULT_OPTIONS","dispatchProgress","dispatchEvent","CustomEvent","detail","cameFromCache","cached","buildId","source","verifyBuildId","hash","texts","analysis","usesMusic","fetchLargeAsset","chunks","gamepad","projectZip","nwjsBuffer","nwjsZip","loadAsync","isWindows","startsWith","isMac","isLinux","nwjsPrefix","packageName","app","newPath","icon","getAppIcon","manifest","main","stageWidth","stageHeight","dataPrefix","icnsData","startScript","unixPermissions","creditsHtmlPath","creditsHtml","cloudVariables","cloudHost","variables","custom","provider","Set","makeWebSocketProvider","makeLocalStorageProvider","variableName","providerToUse","extension","windowTitle","originalLength","newBuffer","originalView","newView","originalLengthAsString","toString","resultIndex","getChar","floor","TextDecoder","encode","progressWeight","PROGRESS_WAITING_FOR_VM_LOAD","PROGRESS_LOADED_JSON_BUT_NEED_ASSETS","readAsDataURL","loadResources","html","appearance","background","foreground","generateFavicon","loadingScreen","username","makeCustomProvider","controls","greenFlag","enabled","stopAll","fullscreen","turbo","interpolation","framerate","highQualityPen","fencing","miscLimits","maxClones","compiler","warpTimer","extensions","js","generateGetProjectData","autoplay","addNwJS","generateAsync","compression","platform","meta","percent","filename","generateFilename","getDefaultPackageNameFromFileName","trim","getWindowTitleFromFileName","hasQueried","previewURL","windowToBlobMap","WeakMap","origin","location","preview","postMessage","close","deepClone","turbowarp","ALMOST_INFINITY","toFixed","stageVariables","isCloud","defaultOptions","variable","previewer","handleLargeAssetFetchProgress","handleZipProgress","runPackager","packager","package","setProgress","$options","$icon","link","download","downloadURL","optionsClone","setContent","confirm","clear","reload","checked","entries","$locale","embedding","onScratch","onGitHub","darkMedia","matchMedia","theme","matches","closeModal","removeAttribute","hostname","doNotTrack","sendEvent","eventName","setRequestHeader","u","getElementById","serviceWorker","register","log"],"mappings":"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","file":"js/packager.f4083677916ab9e226e7.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t3: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"0\":\"vendors~icns~jszip\",\"1\":\"icns\",\"2\":\"jszip\",\"4\":\"vendors~icns\",\"5\":\"vendors~jszip\"}[chunkId]||chunkId) + \".\" + {\"0\":\"5443a6016aa95063f336\",\"1\":\"c06a8923df073d6a8d90\",\"2\":\"adb1f58076fbe3ba2201\",\"4\":\"28158738d19d9e42706e\",\"5\":\"8f352959b4939f1efd75\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([31,6]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = {\n  APP_NAME: 'TurboWarp Packager',\n  SOURCE_CODE: 'https://github.com/TurboWarp/packager',\n  FEEDBACK_SCRATCH: 'https://scratch.mit.edu/users/GarboMuffin/#comments',\n  FEEDBACK_GITHUB: 'https://github.com/TurboWarp/packager/issues'\n};\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"downloader.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"checksum.worker.js\");\n};","const type = (obj) => {\n  if (obj === null) return 'null';\n  if (Array.isArray(obj)) return 'array';\n  return typeof obj;\n};\n\nconst merge = (into, from) => {\n  const typeInto = type(into);\n  const typeFrom = type(from);\n  if (typeInto !== typeFrom || typeInto === 'undefined') {\n    return from;\n  }\n  if (typeInto === 'object') {\n    for (const key of Object.keys(from)) {\n      into[key] = merge(into[key], from[key]);\n    }\n    for (const key of Object.keys(into)) {\n      if (!Object.prototype.hasOwnProperty.call(from, key)) {\n        delete into[key];\n      }\n    }\n  }\n  return into;\n};\n\nexport default merge;\n","const isObject = (v) => !!v && typeof v === 'object' && !Array.isArray(v);\n\nconst areArraysEqual = (a, b) => {\n  if (a.length !== b.length) {\n    return false;\n  }\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * @returns {*|null} null means \"do not store\"\n */\nconst serialize = (value, defaultValue) => {\n  // Never serialize blobs.\n  if (value instanceof Blob) {\n    return null;\n  }\n  if (isObject(defaultValue)) {\n    const result = {};\n    for (const key of Object.keys(defaultValue)) {\n      if (!Object.prototype.hasOwnProperty.call(value, key)) {\n        continue;\n      }\n      const serialized = serialize(value[key], defaultValue[key]);\n      if (serialized !== null) {\n        result[key] = serialized;\n      }\n    }\n    if (Object.keys(result).length === 0) {\n      return null;\n    }\n    return result;\n  }\n  if (Array.isArray(value)) {\n    if (Array.isArray(defaultValue)) {\n      if (areArraysEqual(value, defaultValue)) {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n  if (value === defaultValue) {\n    return null;\n  }\n  return value;\n};\n\nexport default serialize;\n","import {writable} from 'svelte/store';\nimport merge from './lib/merge';\nimport serialize from './lib/serialize';\n\nconst writablePersistentStore = (key, defaultValue) => {\n  let value = JSON.parse(JSON.stringify(defaultValue));\n  const localValue = JSON.parse(localStorage.getItem(key));\n  if (localValue) {\n    value = merge(localValue, value);\n  }\n  const store = writable(value, () => {\n    const unsubscribe = store.subscribe(value => {\n      const serialized = serialize(value, defaultValue);\n      if (serialized === null) {\n        localStorage.removeItem(key);\n      } else {\n        localStorage.setItem(key, JSON.stringify(serialized));\n      }\n    });\n    return unsubscribe;\n  });\n  return store;\n};\n\nexport default writablePersistentStore;\n","import {derived} from 'svelte/store';\nimport writablePersistentStore from '../packager/persistent-store';\nimport localeNames from './locale-names.json';\n\nconst unstructure = (messages) => {\n  for (const key of Object.keys(messages)) {\n    const value = messages[key];\n    if (typeof value === 'object') {\n      if (value.string) {\n        messages[key] = value.string;\n      } else {\n        unstructure(value);\n      }\n    }\n  }\n  return messages;\n};\n\nconst englishMessages = unstructure(require('./en.json'));\nconst allMessages = {\n  en: () => englishMessages,\n  // Generated code:\n  /*===*/\n  \"de\": () => require(\"./de.json\"),\n  \"es\": () => require(\"./es.json\"),\n  \"fi\": () => require(\"./fi.json\"),\n  \"fr\": () => require(\"./fr.json\"),\n  \"it\": () => require(\"./it.json\"),\n  \"ja\": () => require(\"./ja.json\"),\n  \"ko\": () => require(\"./ko.json\"),\n  \"nb\": () => require(\"./nb.json\"),\n  \"nl\": () => require(\"./nl.json\"),\n  \"pl\": () => require(\"./pl.json\"),\n  \"pt\": () => require(\"./pt.json\"),\n  \"ro\": () => require(\"./ro.json\"),\n  \"ru\": () => require(\"./ru.json\"),\n  \"sl\": () => require(\"./sl.json\"),\n  \"sv\": () => require(\"./sv.json\"),\n  \"tr\": () => require(\"./tr.json\"),\n  \"zh-cn\": () => require(\"./zh-cn.json\"),\n  \"zh-tw\": () => require(\"./zh-tw.json\"),\n  /*===*/\n};\n\nconst supportedLocales = {};\n// Iterate over localeNames to preserve order\nfor (const key of Object.keys(localeNames)) {\n  if (allMessages[key]) {\n    supportedLocales[key] = localeNames[key];\n  }\n}\n\nconst getInitialLocale = () => [\n  navigator.language.toLowerCase(),\n  navigator.language.toLowerCase().split('-')[0]\n].find(i => allMessages[i]) || 'en';\n\nconst locale = writablePersistentStore('P4.locale', getInitialLocale());\nlocale.subscribe((locale) => {\n  document.documentElement.lang = locale;\n});\n\nconst getProperty = (obj, id) => {\n  const parts = id.split('.');\n  for (let i = 0; i < parts.length - 1; i++) {\n    obj = obj[parts[i]];\n    if (!obj) {\n      return null;\n    }\n  }\n  return obj[parts[parts.length - 1]] || null;\n};\n\nconst translate = derived(locale, (locale) => {\n  const localMessages = allMessages[locale]();\n  /**\n   * @param {string} id Message ID\n   * @returns {string} Translated message\n   */\n  return (id) => {\n    return getProperty(localMessages, id) || getProperty(englishMessages, id) || id;\n  };\n});\n\nexport {\n  locale,\n  supportedLocales,\n  translate as _\n};\n","<script>\n  import {onMount, onDestroy, tick} from 'svelte';\n  import {_} from '../locales/index';\n\n  export let message;\n  export let values;\n  let el;\n\n  const build = () => {\n    while (el.firstChild) {\n      el.removeChild(el.firstChild);\n    }\n    const parts = message.split(/{(\\w+)}/g);\n    for (let i = 0; i < parts.length; i++) {\n      const part = parts[i];\n      const isText = i % 2 === 0;\n      if (isText) {\n        el.appendChild(document.createTextNode(part));\n      } else {\n        const value = values[part];\n        if (value) {\n          const node = document.createElement('a');\n          node.href = value.href;\n          node.textContent = value.text;\n          el.appendChild(node);\n        } else {\n          console.warn('Missing placeholder', part);\n          el.appendChild(document.createTextNode(`???{${part}}`));\n        }\n      }\n    }\n  };\n\n  const unsubscribe = _.subscribe(() => {\n    if (el) {\n      // message props don't get updated until after tick\n      tick().then(build);\n    }\n  });\n\n  onMount(build);\n  onDestroy(unsubscribe);\n</script>\n\n<span bind:this={el}></span>\n","<script>\n  export let caption = false;\n  export let modal = false;\n  export let accent = '';\n</script>\n\n<style>\n  .card {\n    max-width: 600px;\n    margin: auto;\n    border-radius: 0.3em;\n    background-color: #fff;\n    padding: 1em;\n    margin-top: 1em;\n    margin-bottom: 1em;\n    box-shadow: 0 2px 0.5em 0.1em rgba(0, 0, 0, 0.2);\n  }\n  :global([theme=\"dark\"]) .card {\n    background: #222;\n  }\n  .caption {\n    text-align: center;\n    font-style: italic;\n  }\n  .modal {\n    width: 100%;\n    max-width: 400px;\n    margin: 0 8px;\n  }\n</style>\n\n<div class=\"card\" class:caption class:modal style={accent ? `border-top: 6px solid ${accent}` : ''}>\n  <slot></slot>\n</div>\n","<script>\n  export let disabled;\n  export let secondary;\n  export let danger;\n  export let text;\n</script>\n\n<style>\n  button {\n    font-family: inherit;\n    font-size: 14px;\n    background-color: #ff4c4c;\n    color: white;\n    border: none;\n    padding: 0.5rem 1rem;\n    margin: 0;\n    border-radius: 4px;\n    cursor: pointer;\n    font-family: inherit;\n    font-weight: bold;\n  }\n  button:active {\n    background-color: #b92828;\n  }\n  button:disabled {\n    background-color: #ff9797;\n    cursor: not-allowed;\n  }\n  .secondary {\n    background-color: #0FBD8C;\n  }\n  .secondary:active {\n    background-color: #03946b;\n  }\n  .secondary:disabled {\n    background-color: #57dbb6;\n  }\n  .danger {\n    background-color: #FF8C1A;\n  }\n  .danger:active {\n    background-color: #c76c12;\n  }\n  .danger:disabled {\n    background-color: #ffbd7b;\n  }\n</style>\n\n<button on:click disabled={disabled} class:secondary class:danger>\n  {text}\n</button>\n","import {writable} from 'svelte/store';\n\nconst error = writable(null);\nconst progress = writable({\n  progress: 0,\n  visible: false,\n  text: ''\n});\nprogress.reset = () => {\n  progress.set({\n    progress: 0,\n    visible: false,\n    text: ''\n  });\n};\n\nexport {\n  error,\n  progress\n};\n","/**\n * A type of Error that indicates that the user has configured something wrong, and this error is not a bug.\n */\nclass UserError extends Error {\n\n}\n\nexport {\n  UserError\n};\n","export const readAsArrayBuffer = (o) => new Promise((resolve, reject) => {\n  const fr = new FileReader();\n  fr.onload = () => resolve(fr.result);\n  fr.onerror = () => reject(new Error('Can not read as array buffer'));\n  fr.readAsArrayBuffer(o);\n});\n\nexport const readAsURL = (o) => new Promise((resolve, reject) => {\n  const fr = new FileReader();\n  fr.onload = () => resolve(fr.result);\n  fr.onerror = () => reject(new Error('Can not read as URL'));\n  fr.readAsDataURL(o);\n});\n","const clampProgress = (n) => Math.max(0, Math.min(1, n));\n\nconst xhr = ({\n  url,\n  type,\n  progressCallback,\n  timeout,\n  estimatedSize\n}) => new Promise((resolve, reject) => {\n  const xhr = new XMLHttpRequest();\n  xhr.onload = () => {\n    if (xhr.status === 200) {\n      resolve(xhr.response);\n    } else {\n      reject(new Error(`Request failed with status code: ${xhr.status}`));\n    }\n  };\n  xhr.onerror = () => {\n    reject(new Error('Request failed, are you offline?'));\n  };\n  if (progressCallback) {\n    xhr.onprogress = (e) => {\n      if (e.lengthComputable) {\n        progressCallback(clampProgress(e.loaded / e.total));\n      } else if (estimatedSize) {\n        progressCallback(clampProgress(e.loaded / estimatedSize));\n      }\n    };\n  }\n  xhr.responseType = type;\n  xhr.open('GET', url);\n  xhr.send();\n  if (timeout) {\n    setTimeout(() => {\n      xhr.abort();\n      reject(new Error('Request timed out'));\n    }, timeout);\n  }\n});\n\nexport default xhr;\n","import * as Comlink from 'comlink';\nimport DownloadWorker from 'worker-loader?name=downloader.worker.js!./downloader.worker.js';\nimport {readAsArrayBuffer} from './lib/readers';\nimport xhr from './lib/xhr';\n\nconst downloadProject = async (buffer, progressCallback) => {\n  const worker = new DownloadWorker();\n  const wrap = Comlink.wrap(worker);\n  const project = await wrap.downloadProject(Comlink.transfer(buffer, [buffer]), Comlink.proxy(progressCallback));\n  worker.terminate();\n  return project;\n};\n\nconst fromURL = async (url, progressCallback) => {\n  const buffer = await xhr({\n    url,\n    type: 'arraybuffer',\n    progressCallback: (progress) => {\n      progressCallback('fetch', progress);\n    }\n  });\n  return downloadProject(buffer, progressCallback);\n};\n\nconst fromID = (id, progressCallback) => fromURL(`https://projects.scratch.mit.edu/${id}`, progressCallback);\n\nconst fromFile = async (file, progressCallback) => {\n  const buffer = await readAsArrayBuffer(file);\n  return downloadProject(buffer, progressCallback);\n};\n\nexport default {\n  fromID,\n  fromURL,\n  fromFile\n};\n","import xhr from './xhr';\n\nconst getProjectTitle = async (id) => {\n  try {\n    const meta = await xhr({\n      url: `https://trampoline.turbowarp.org/proxy/projects/${id}`,\n      timeout: 5000,\n      type: 'json'\n    });\n    return meta.title;\n  } catch (e) {\n    // Happens commonly when loading unshared projects, not something to worry about\n    return '';\n  }\n};\n\nexport default getProjectTitle;\n","export const extractProjectId = (text) => {\n  const match = text.match(/\\d+/);\n  if (!match) {\n    return '';\n  }\n  return match[0];\n};\n\nexport const isValidURL = (str) => {\n  try {\n    const url = new URL(str);\n    return url.protocol === 'http:' || url.protocol === 'https:';\n  } catch (e) {\n    return false;\n  }\n};\n\nexport const getTitleFromURL = (url) => {\n  const match = url.match(/\\/([^\\/]+)\\.sb[2|3]?$/);\n  if (match) {\n    return match[1];\n  }\n  return '';\n};\n","<script>\n  import {_} from '../locales/';\n  import Section from './Section.svelte';\n  import Button from './Button.svelte';\n  import writablePersistentStore from './persistent-store';\n  import {error, progress} from './stores';\n  import {UserError} from './errors';\n  import loadProject from './load-project';\n  import getProjectTitle from './lib/get-project-meta.js';\n  import {extractProjectId, isValidURL, getTitleFromURL} from './lib/url-utils';\n\n  export let projectData = null;\n  const type = writablePersistentStore('SelectProject.type', 'id');\n  const projectId = writablePersistentStore('SelectProject.id', '60917032');\n  const projectUrl = writablePersistentStore('SelectProject.url', '');\n  let files = null;\n\n  const reset = () => {\n    projectData = null;\n  };\n\n  // Reset project whenever an input changes\n  $: files, $projectId, $type, reset();\n\n  const load = async () => {\n    if ($progress.visible) {\n      // Already running something\n      return;\n    }\n\n    try {\n      reset();\n      $progress.visible = true;\n\n      let uniqueId = '';\n      let id = null;\n      let projectTitle = '';\n      let project;\n\n      const progressCallback = (type, a, b) => {\n        if (type === 'fetch') {\n          $progress.progress = a;\n        } else if (type === 'assets') {\n          $progress.text = $_('progress.loadingAssets')\n            .replace('{complete}', a)\n            .replace('{total}', b);\n          $progress.progress = a / b;\n        } else if (type === 'compress') {\n          $progress.text = $_('progress.compressingProject');\n          $progress.progress = a;\n        }\n      };\n\n      if ($type === 'id') {\n        id = $projectId;\n        if (!id) {\n          throw new UserError($_('select.invalidId'));\n        }\n        uniqueId = `#${id}`;\n        $progress.text = $_('progress.loadingProjectData');\n        projectTitle = await getProjectTitle(id);\n        project = await loadProject.fromID(id, progressCallback);\n      } else if ($type === 'file') {\n        if (!files) {\n          throw new UserError($_('select.noFileSelected'));\n        }\n        const file = files[0];\n        uniqueId = `@${file.name}`;\n        projectTitle = file.name;\n        $progress.text = $_('progress.compressingProject');\n        project = await loadProject.fromFile(file, progressCallback);\n      } else if ($type === 'url') {\n        const url = $projectUrl;\n        if (!isValidURL(url)) {\n          throw new UserError($_('select.invalidUrl'));\n        }\n        uniqueId = `$${url}`;\n        $progress.text = $_('progress.loadingProjectData');\n        projectTitle = getTitleFromURL(url);\n        project = await loadProject.fromURL(url, progressCallback);\n      } else {\n        throw new Error('Unknown type');\n      }\n\n      projectData = {\n        projectId: id,\n        uniqueId,\n        title: projectTitle,\n        project,\n      };\n    } catch (e) {\n      $error = e;\n    }\n\n    progress.reset();\n  };\n\n  // just incase some non-number string was stored from older versions\n  $projectId = extractProjectId($projectId);\n\n  const getDisplayedProjectURL = () => `https://scratch.mit.edu/projects/${$projectId}`;\n\n  const submitOnEnter = (e) => {\n    if (e.key === 'Enter') {\n      e.target.blur();\n      load();\n    }\n  };\n  const handleInput = (e) => {\n    $projectId = extractProjectId(e.target.value);\n    e.target.value = getDisplayedProjectURL();\n  };\n  const handleFocus = (e) => {\n    e.target.select();\n  };\n</script>\n\n<style>\n  input[type=\"text\"] {\n    max-width: 300px;\n    flex-grow: 1;\n  }\n  .option {\n    min-height: 25px;\n    display: flex;\n    align-items: center;\n  }\n  input[type=\"text\"], input[type=\"file\"] {\n    margin-left: 4px;\n  }\n</style>\n\n<Section accent=\"#4C97FF\">\n  <h2>{$_('select.select')}</h2>\n  <p>{$_('select.selectHelp')}</p>\n  <div class=\"option\">\n    <label>\n      <input type=\"radio\" bind:group={$type} value=\"id\">\n      {$_('select.id')}\n    </label>\n    {#if $type === \"id\"}\n      <input type=\"text\" value={getDisplayedProjectURL()} spellcheck=\"false\" on:keypress={submitOnEnter} on:input={handleInput} on:focus={handleFocus}>\n    {/if}\n  </div>\n  <div class=\"option\">\n    <label>\n      <input type=\"radio\" bind:group={$type} value=\"file\">\n      {$_('select.file')}\n    </label>\n    {#if $type === \"file\"}\n      <input bind:files={files} type=\"file\" accept=\".sb,.sb2,.sb3\">\n    {/if}\n  </div>\n  <div class=\"option\">\n    <label>\n      <input type=\"radio\" bind:group={$type} value=\"url\">\n      {$_('select.url')}\n    </label>\n    {#if $type === \"url\"}\n      <input type=\"text\" bind:value={$projectUrl} spellcheck=\"false\" placeholder=\"https://...\" on:keypress={submitOnEnter}>\n    {/if}\n  </div>\n\n  <p>\n    <Button on:click={load} disabled={$progress.visible} text={$_('select.loadProject')} />\n  </p>\n</Section>\n\n{#if !$progress.visible && !projectData}\n  <Section caption>\n    <p>{$_('select.loadToContinue')}</p>\n  </Section>\n{/if}\n","<script>\n  import {_} from '../locales';\n\n  const ACCEPT = [\n    '.png',\n    '.jpg',\n    '.jpeg',\n    '.bmp',\n    '.svg',\n    '.ico'\n  ];\n\n  export let file;\n  let dragging;\n  let url;\n\n  // This is a bit strange, there's probably a better way to do this\n  // Seems to create and revoke an extra object URL for each file for some reason\n  $: if (file) {\n    if (url) {\n      URL.revokeObjectURL(url);\n    }\n    url = URL.createObjectURL(file);\n  } else if (url) {\n    URL.revokeObjectURL(url);\n    url = null;\n  }\n\n  const clear = (e) => {\n    e.stopPropagation();\n    file = null;\n  };\n\n  const handleClickBackground = () => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = ACCEPT.join(',');\n    input.addEventListener('change', (e) => {\n      const files = e.target.files;\n      if (files.length) {\n        file = files[0];\n      } else {\n        file = null;\n      }\n    });\n    document.body.appendChild(input);\n    input.click();\n    input.remove();\n  };\n\n  const handleDragOver = (e) => {\n    if (!e.dataTransfer.types.includes('Files')) {\n      return;\n    }\n    e.preventDefault();\n    dragging = true;\n  };\n\n  const handleDragLeave = (e) => {\n    e.preventDefault();\n    dragging = false;\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    dragging = false;\n    if (e.dataTransfer.types.includes('Files')) {\n      const droppedFile = e.dataTransfer.files[0];\n      if (droppedFile && ACCEPT.some((ext) => droppedFile.name.endsWith(ext))) {\n        file = droppedFile;\n      }\n    }\n  };\n</script>\n\n<style>\n  .container {\n    color: #555;\n    width: 100%;\n    box-sizing: border-box;\n    border: 3px dashed currentColor;\n    transition: .2s border-color, .2s color;\n    border-radius: 20px;\n    min-height: 90px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    overflow: hidden;\n    user-select: none;\n    position: relative;\n    cursor: pointer;\n    padding: 4px;\n  }\n  :global([theme=\"dark\"]) .container {\n    color: #aaa;\n  }\n  .dragging,\n  .container:focus-visible,\n  .container:active {\n    color: rgb(79, 123, 211);\n  }\n  :global([theme=\"dark\"]) .dragging,\n  :global([theme=\"dark\"]) .container:focus-visible,\n  :global([theme=\"dark\"]) .container:active {\n    color: rgb(178, 195, 228);\n  }\n  .placeholder {\n    font-size: 1.5em;\n  }\n  .selected {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n  .selected > *:not(:last-child) {\n    margin-right: 12px;\n  }\n</style>\n\n<div\n  class=\"container\"\n  class:dragging\n  role=\"button\"\n  tabindex=\"0\"\n  on:click={handleClickBackground}\n  on:dragover={handleDragOver}\n  on:dragleave={handleDragLeave}\n  on:drop={handleDrop}\n>\n  {#if file}\n    <div class=\"selected\">\n      <!-- svelte-ignore a11y-missing-attribute -->\n      <img src={url} width=\"64\" height=\"64\">\n      <!-- svelte-ignore a11y-missing-attribute -->\n      <img src={url} width=\"32\" height=\"32\">\n      <!-- svelte-ignore a11y-missing-attribute -->\n      <img src={url} width=\"16\" height=\"16\">\n      <div>{$_('fileInput.selected').replace('{file}', file.name)}</div>\n      <button on:click={clear}>{$_('fileInput.clear')}</button>\n    </div>\n  {:else}\n    <div class=\"placeholder\">{$_('fileInput.select')}</div>\n  {/if}\n</div>\n","<script>\n  export let value;\n\n  let customExtensions = value.map(i => i.url).join('\\n');\n  $: value = customExtensions.split('\\n').filter(i => i).map(i => ({url: i}));\n</script>\n\n<style>\n  textarea {\n    display: block;\n    width: 100%;\n    height: 100px;\n    box-sizing: border-box;\n  }\n</style>\n\n<textarea bind:value={customExtensions}></textarea>\n","export default __webpack_public_path__ + \"assets/default-icon.9d63d3cfa69f175efb0a137a4a1e7c09.png\";","// Defined by webpack\nconst LARGE_ASSET_BASE = process.env.LARGE_ASSET_BASE;\nconst SCAFFOLDING_ROOT = 'scaffolding/';\n\nexport default {\n  'nwjs-win64': {\n    src: LARGE_ASSET_BASE + 'nwjs-v0.54.0-win-x64.zip',\n    sha256: '0f082671b67b711f783d98cc989cf5aebacfc9bce3bef78875b57d08fc2a6e86',\n    type: 'arraybuffer'\n  },\n  'nwjs-win32': {\n    src: LARGE_ASSET_BASE + 'nwjs-v0.54.0-win-ia32.zip',\n    sha256: '7a1ed3a6a51b8cdf9280761b90cb4723cf9ee8050e3ed0b58451e8e4e694b203',\n    type: 'arraybuffer'\n  },\n  'nwjs-mac': {\n    src: LARGE_ASSET_BASE + 'nwjs-v0.54.0-osx-x64.zip',\n    sha256: '498c97a264f8feac504c4c2396c1fddc8290c15573aee2fc692e59ff9803cc40',\n    type: 'arraybuffer'\n  },\n  'nwjs-linux-x64': {\n    src: LARGE_ASSET_BASE + 'nwjs-v0.54.0-linux-x64.zip',\n    sha256: '53651a3a12d29ad096cff5b44d9f1e3aa09e9fad970bdcfe8bda07ea23d960d8',\n    type: 'arraybuffer'\n  },\n  scaffolding: {\n    src: SCAFFOLDING_ROOT + 'scaffolding.js',\n    estimatedSize: 4775503,\n    useBuildId: true,\n    type: 'text'\n  },\n  'scaffolding-min': {\n    src: SCAFFOLDING_ROOT + 'scaffolding-min.js',\n    estimatedSize: 2540321,\n    useBuildId: true,\n    type: 'text'\n  },\n  addons: {\n    src: SCAFFOLDING_ROOT + 'addons.js',\n    estimatedSize: 14339,\n    useBuildId: true,\n    type: 'text'\n  }\n};\n","import {readAsArrayBuffer} from './readers';\n\nconst loadImage = (src) => new Promise((resolve, reject) => {\n  const image = new Image();\n  image.onload = () => resolve(image);\n  image.onerror = () => reject(new Error(`Could not load image: ${src}`));\n  image.src = src;\n});\n\nconst canvasToBlob = (canvas) => new Promise((resolve, reject) => {\n  canvas.toBlob((blob) => {\n    if (blob) {\n      resolve(blob);\n    } else {\n      reject(new Error('Could not read <canvas> as blob'));\n    }\n  });\n});\n\nconst pngToAppleICNS = async (pngData) => {\n  const {\n    Icns,\n    Buffer\n  } = await import(/* webpackChunkName: \"icns\" */ './icns-bundle');\n\n  const FORMATS = [\n    { type: 'ic04', size: 16 },\n    { type: 'ic07', size: 128 },\n    { type: 'ic08', size: 256 },\n    { type: 'ic09', size: 512 },\n    { type: 'ic10', size: 1024 },\n    { type: 'ic11', size: 32 },\n    { type: 'ic12', size: 64 },\n    { type: 'ic13', size: 256 },\n    { type: 'ic14', size: 512 },\n  ];\n\n  // Read the Image.\n  const pngDataBlob = new Blob([pngData], {\n    type: 'image/png'\n  });\n  const url = URL.createObjectURL(pngDataBlob);\n  const image = await loadImage(url);\n\n  // Determine the formats to create\n  const eligibleFormats = FORMATS.filter((format) => {\n    // Always include the smallest size so that tiny images will get at least 1 image.\n    if (format.size === 16) {\n      return true;\n    }\n    return image.width >= format.size && image.height >= format.size;\n  });\n\n  // Create a single canvas to be used for conversion\n  // Creating many canvases is prone to error in Safari\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    throw new Error('cannot get canvas rendering context');\n  }\n\n  const icns = new Icns.Icns();\n  for (const format of eligibleFormats) {\n    // Use the canvas to scale the image.\n    const formatSize = format.size;\n    canvas.width = formatSize;\n    canvas.height = formatSize;\n    ctx.drawImage(image, 0, 0, formatSize, formatSize);\n\n    const blob = await canvasToBlob(canvas);\n    const arrayBuffer = await readAsArrayBuffer(blob);\n    const icnsImage = await Icns.IcnsImage.fromPNG(Buffer.from(arrayBuffer), format.type);\n    icns.append(icnsImage);\n  }\n\n  return icns.data;\n};\n\nexport default pngToAppleICNS;\n","const SCAFFOLDING_BUILD_ID = process.env.SCAFFOLDING_BUILD_ID;\n\nconst verifyBuildId = (buildId, source) => {\n  if (source.endsWith('=^..^=')) {\n    return source.endsWith(`${buildId} =^..^=`);\n  }\n  return true;\n};\n\nexport {\n  SCAFFOLDING_BUILD_ID as buildId,\n  verifyBuildId\n};\n","// https://github.com/jakearchibald/safari-14-idb-fix/blob/582bbdc7230891113bfb5743391550cbf29d21f2/src/index.ts\nconst idbReady = () => {\n  const isSafari =\n    !navigator.userAgentData &&\n    /Safari\\//.test(navigator.userAgent) &&\n    !/Chrom(e|ium)\\//.test(navigator.userAgent);\n\n  // No point putting other browsers or older versions of Safari through this mess.\n  if (!isSafari || !indexedDB.databases) return Promise.resolve();\n\n  let intervalId;\n  return new Promise((resolve) => {\n    const tryIdb = () => indexedDB.databases().finally(resolve);\n    intervalId = setInterval(tryIdb, 100);\n    tryIdb();\n  }).finally(() => clearInterval(intervalId));\n};\n\nclass Database {\n  constructor (name, version, storeName) {\n    this.name = name;\n    this.version = version;\n    this.storeName = storeName;\n    this.db = null;\n  }\n\n  async open () {\n    if (this.db) {\n      return this.db;\n    }\n    if (!window.indexedDB) {\n      throw new Error('indexedDB is not supported');\n    }\n    await idbReady();\n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open(this.name, this.version);\n      request.onupgradeneeded = (e) => {\n        const db = e.target.result;\n        db.createObjectStore(this.storeName, {\n          keyPath: 'id'\n        });\n      };\n      request.onsuccess = (e) => {\n        this.db = e.target.result;\n        this.onopen()\n          .then(() => {\n            resolve(this.db);\n          })\n          .catch((err) => {\n            reject(err);\n          });\n      };\n      request.onerror = (e) => {\n        reject(new Error(`IDB Error ${e.target.error}`));\n      };\n    });\n  }\n\n  async createTransaction (readwrite) {\n    const db = await this.open();\n    const transaction = db.transaction(this.storeName, readwrite);\n    const store = transaction.objectStore(this.storeName);\n    return {\n      db,\n      transaction,\n      store\n    };\n  }\n\n  async deleteEverything () {\n    const {transaction, store} = await this.createTransaction('readwrite');\n    return new Promise((resolve, reject) => {\n      Database.setTransactionErrorHandler(transaction, reject);\n      const request = store.openCursor();\n      request.onsuccess = e => {\n        const cursor = e.target.result;\n        if (cursor) {\n          cursor.delete();\n          cursor.continue();\n        } else {\n          resolve();\n        }\n      };\n    });\n  }\n\n  onopen () {\n    return Promise.resolve();\n  }\n}\n\nDatabase.setTransactionErrorHandler = (transaction, reject) => {\n  transaction.onerror = () => {\n    reject(new Error(`Transaction error: ${transaction.error}`))\n  };\n};\n\nexport default Database;\n","import largeAssets from './large-assets';\nimport {buildId} from './lib/build-id';\nimport Database from './lib/idb';\n\n// We can't trust the HTTP cache to reliably cache these large assets\n\nconst DATABASE_NAME = 'p4-large-assets';\nconst DATABASE_VERSION = 1;\nconst STORE_NAME = 'assets';\n\nconst db = new Database(DATABASE_NAME, DATABASE_VERSION, STORE_NAME);\n\nconst getAssetId = (asset) => {\n  return `${asset.src}-${asset.type}-${asset.sha256 || buildId}`;\n};\n\nconst removeExtraneous = async () => {\n  const {transaction, store} = await db.createTransaction('readwrite');\n  return new Promise((resolve, reject) => {\n    Database.setTransactionErrorHandler(transaction, reject);\n    const allValidAssetIds = Object.values(largeAssets).map(getAssetId);\n    const request = store.openCursor();\n    request.onsuccess = e => {\n      const cursor = e.target.result;\n      if (cursor) {\n        const key = cursor.key;\n        if (!allValidAssetIds.includes(key)) {\n          cursor.delete();\n        }\n        cursor.continue();\n      } else {\n        resolve();\n      }\n    };\n  });\n};\ndb.onopen = removeExtraneous;\n\nconst get = async (asset) => {\n  const {transaction, store} = await db.createTransaction('readonly');\n  return new Promise((resolve, reject) => {\n    Database.setTransactionErrorHandler(transaction, reject);\n    const assetId = getAssetId(asset);\n    const request = store.get(assetId);\n    request.onsuccess = (e) => {\n      const result = e.target.result;\n      if (result) {\n        resolve(result.data);\n      } else {\n        resolve(null);\n      }\n    };\n  });\n};\n\nconst set = async (asset, content) => {\n  const {transaction, store} = await db.createTransaction('readwrite');\n  return new Promise((resolve, reject) => {\n    Database.setTransactionErrorHandler(transaction, reject);\n    const assetId = getAssetId(asset);\n    const request = store.put({\n      id: assetId,\n      data: content\n    });\n    request.onsuccess = () => {\n      resolve();\n    };\n  });\n};\n\nconst resetAll = () => db.deleteEverything();\n\nexport default {\n  get,\n  set,\n  resetAll\n};\n","// This implements a custom base85 encoding for improved efficiency compared to base64\n// The character set used is 0x2a - 0x7e of ASCII\n// 0x3c (<) is replaced with 0x28 (opening parenthesis) and 0x3e (>) is replaced with 0x29 (closing parenthesis)\n// Encoded data can be safely included in HTML without escapes\n\n// It's possible these functions will be stringified at runtime to be included in generated code,\n// so make sure that they're entirely self contained\n\n/**\n * @param {ArrayBuffer} buffer The data to encode\n * @returns {string} Encoded string\n */\nexport const encode = (buffer) => {\n  const originalLength = buffer.byteLength;\n  let data;\n  if (originalLength % 4 !== 0) {\n    const newBuffer = new ArrayBuffer(originalLength + (4 - originalLength % 4));\n    const originalView = new Uint8Array(buffer);\n    const newView = new Uint8Array(newBuffer);\n    for (let i = 0; i < originalView.length; i++) {\n      newView[i] = originalView[i];\n    }\n    data = new Uint32Array(newBuffer);\n  } else {\n    data = new Uint32Array(buffer);\n  }\n\n  const originalLengthAsString = originalLength.toString();\n  const resultBuffer = new ArrayBuffer(originalLengthAsString.length + 1 + data.byteLength * 5 / 4);\n  const resultView = new Uint8Array(resultBuffer);\n  let resultIndex = 0;\n  for (let i = 0; i < originalLengthAsString.length; i++) {\n    resultView[resultIndex++] = originalLengthAsString.charCodeAt(i);\n  }\n  resultView[resultIndex++] = 44; // ascii for \",\"\n\n  const getChar = (n) => {\n    n += 0x2a;\n    if (n === 0x3c) return 0x28;\n    if (n === 0x3e) return 0x29;\n    return n;\n  };\n  for (let i = 0; i < data.length; i++) {\n    let n = data[i];\n    resultView[resultIndex++] = getChar(n % 85);\n    n = Math.floor(n / 85);\n    resultView[resultIndex++] = getChar(n % 85);\n    n = Math.floor(n / 85);\n    resultView[resultIndex++] = getChar(n % 85);\n    n = Math.floor(n / 85);\n    resultView[resultIndex++] = getChar(n % 85);\n    n = Math.floor(n / 85);\n    resultView[resultIndex++] = getChar(n % 85);\n  }\n  return new TextDecoder().decode(resultBuffer);\n};\n\n/**\n * @param {string} str\n * @returns {Uint8Array}\n */\nexport const decode = (str) => {\n  const getValue = (code) => {\n    if (code === 0x28) code = 0x3c;\n    if (code === 0x29) code = 0x3e;\n    return code - 0x2a;\n  };\n  const toMultipleOfFour = (n) => {\n    if (n % 4 === 0) {\n      return n;\n    }\n    return n + (4 - n % 4);\n  };\n  const lengthEndsAt = str.indexOf(',');\n  const byteLength = +str.substring(0, lengthEndsAt);\n  const resultBuffer = new ArrayBuffer(toMultipleOfFour(byteLength));\n  const resultView = new Uint32Array(resultBuffer);\n  for (let i = lengthEndsAt + 1, j = 0; i < str.length; i += 5, j++) {\n    resultView[j] = (\n      getValue(str.charCodeAt(i + 4)) * 85 * 85 * 85 * 85 +\n      getValue(str.charCodeAt(i + 3)) * 85 * 85 * 85 +\n      getValue(str.charCodeAt(i + 2)) * 85 * 85 +\n      getValue(str.charCodeAt(i + 1)) * 85 +\n      getValue(str.charCodeAt(i))\n    );\n  }\n  return new Uint8Array(resultBuffer, 0, byteLength);\n};\n","import * as Comlink from 'comlink';\nimport {EventTarget} from 'event-target-shim';\nimport ChecksumWorker from 'worker-loader?name=checksum.worker.js!./checksum.worker.js'\nimport defaultIcon from './default-icon.png';\nimport {readAsArrayBuffer, readAsURL} from './lib/readers';\nimport largeAssets from './large-assets';\nimport xhr from './lib/xhr';\nimport pngToAppleICNS from './lib/icns';\nimport assetCache from './cache';\nimport {buildId, verifyBuildId} from './lib/build-id';\nimport {encode, decode} from './lib/base85-encode';\nimport {APP_NAME, SOURCE_CODE} from './brand';\n\nconst PROGRESS_LOADED_SCRIPTS = 0.1;\nconst PROGRESS_LOADED_JSON_BUT_NEED_ASSETS = 0.2;\nconst PROGRESS_FETCHED_INLINE_DATA_BUT_NOT_LOADED = 0.9;\nconst PROGRESS_WAITING_FOR_VM_LOAD = 1;\n\nconst escapeXML = (v) => v.replace(/[\"'<>&]/g, (i) => {\n  switch (i) {\n    case '\"': return '&quot;';\n    case '\\'': return '&apos;';\n    case '<': return '&lt;';\n    case '>': return '&gt;';\n    case '&': return '&amp;';\n  }\n});\n\nconst sha256 = async (buffer) => {\n  const worker = new ChecksumWorker();\n  const wrap = Comlink.wrap(worker);\n  const hash = await wrap.sha256(buffer);\n  worker.terminate();\n  return hash;\n};\n\nconst getJSZip = async () => (await import(/* webpackChunkName: \"jszip\" */ 'jszip')).default;\n\nconst setFileFast = (zip, path, data) => {\n  zip.files[path] = data;\n};\n\nconst getAppIcon = async (file) => {\n  if (!file) {\n    return xhr({\n      url: defaultIcon,\n      type: 'arraybuffer'\n    });\n  }\n  // Convert to PNG\n  if (file.type === 'image/png') {\n    return readAsArrayBuffer(file);\n  }\n  return new Promise((resolve, reject) => {\n    const url = URL.createObjectURL(file);\n    const image = new Image();\n    image.onload = () => {\n      image.onload = null;\n      image.onerror = null;\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      if (!ctx) {\n        reject(new Error('Cannot get rendering context for icon conversion'));\n        return;\n      }\n      canvas.width = image.width;\n      canvas.height = image.height;\n      ctx.drawImage(image, 0, 0);\n      canvas.toBlob((blob) => {\n        URL.revokeObjectURL(url);\n        resolve(readAsArrayBuffer(blob));\n      });\n    };\n    image.onerror = () => {\n      image.onload = null;\n      image.onerror = null;\n      reject(new Error('Cannot load icon'));\n    };\n    image.src = url;\n  });\n};\n\nconst COPYRIGHT_HEADER = `/*!\n* This script was generated by the ${APP_NAME}.\n*\n* Copyright (C) 2021 Thomas Weber\n*\n* This program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Lesser General Public License version 3\n* as published by the Free Software Foundation.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Lesser General Public License for more details.\n*\n* You should have received a copy of the GNU Lesser General Public License\n* along with this program. If not, see <https://www.gnu.org/licenses/>.\n*/\\n`;\n\nconst APPEND_TO_CREDITS_HTML = `\n<div class=\"product\">\n<span class=\"title\">The following entries were added by the ${APP_NAME}</span>\n</div>\n\n<div class=\"product\">\n<span class=\"title\">Scratch</span>\n<span class=\"homepage\"><a href=\"https://scratch.mit.edu/\">homepage</a></span>\n<input type=\"checkbox\" hidden id=\"p4-scratch\">\n<label class=\"show\" for=\"p4-scratch\" tabindex=\"0\"></label>\n<div class=\"licence\">\n<pre>Copyright (c) 2016, Massachusetts Institute of Technology\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n\n3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n</pre>\n</div>\n</div>\n\n<div class=\"product\">\n<span class=\"title\">${APP_NAME}</span>\n<span class=\"homepage\"><a href=\"${SOURCE_CODE}\">homepage</a></span>\n<input type=\"checkbox\" hidden id=\"p4-tw-scratch-vm\">\n<label class=\"show\" for=\"p4-tw-scratch-vm\" tabindex=\"0\"></label>\n<div class=\"licence\">\n<pre>Copyright (C) 2021 Thomas Weber\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License version 3\nas published by the Free Software Foundation.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with this program. If not, see &lt;https://www.gnu.org/licenses/&gt;.\n</pre>\n</div>\n</div>`;\n\nclass Packager extends EventTarget {\n  constructor () {\n    super();\n    this.project = null;\n    this.options = Packager.DEFAULT_OPTIONS();\n  }\n\n  async fetchLargeAsset (name) {\n    const asset = largeAssets[name];\n    if (!asset) {\n      throw new Error(`Invalid asset: ${name}`);\n    }\n    const dispatchProgress = (progress) => this.dispatchEvent(new CustomEvent('large-asset-fetch', {\n      detail: {\n        asset: name,\n        progress\n      }\n    }));\n    dispatchProgress(0);\n    let result;\n    let cameFromCache = false;\n    try {\n      const cached = await assetCache.get(asset);\n      if (cached) {\n        result = cached;\n        cameFromCache = true;\n        dispatchProgress(0.5);\n      }\n    } catch (e) {\n      console.warn(e);\n    }\n    if (!result) {\n      let url = asset.src;\n      if (asset.useBuildId) {\n        url += `?${buildId}`;\n      }\n      result = await xhr({\n        url,\n        type: asset.type,\n        estimatedSize: asset.estimatedSize,\n        progressCallback: (progress) => {\n          dispatchProgress(progress);\n        }\n      });\n    }\n    if (asset.useBuildId && !verifyBuildId(buildId, result)) {\n      throw new Error('Build ID mismatch');\n    }\n    if (asset.sha256) {\n      const hash = await sha256(result);\n      if (hash !== asset.sha256) {\n        throw new Error(`Hash mismatch for ${name}, found ${hash} but expected ${asset.sha256}`);\n      }\n    }\n    if (!cameFromCache) {\n      try {\n        await assetCache.set(asset, result);\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n    dispatchProgress(1);\n    return result;\n  }\n\n  async loadResources () {\n    const texts = [COPYRIGHT_HEADER];\n    if (this.project.analysis.usesMusic) {\n      texts.push(await this.fetchLargeAsset('scaffolding'));\n    } else {\n      texts.push(await this.fetchLargeAsset('scaffolding-min'));\n    }\n    if (this.options.chunks.gamepad) {\n      texts.push(await this.fetchLargeAsset('addons'));\n    }\n    this.script = texts.join('\\n').replace(/<\\/script>/g,\"</scri'+'pt>\");\n  }\n\n  async addNwJS (projectZip) {\n    const nwjsBuffer = await this.fetchLargeAsset(this.options.target);\n    const nwjsZip = await (await getJSZip()).loadAsync(nwjsBuffer);\n\n    const isWindows = this.options.target.startsWith('nwjs-win');\n    const isMac = this.options.target === 'nwjs-mac';\n    const isLinux = this.options.target.startsWith('nwjs-linux');\n\n    // NW.js Windows folder structure:\n    // * (root)\n    // +-- nwjs-v0.49.0-win-x64\n    //   +-- nw.exe (executable)\n    //   +-- credits.html\n    //   +-- (project data)\n    //   +-- ...\n\n    // NW.js macOS folder structure:\n    // * (root)\n    // +-- nwjs-v0.49.0-osx-64\n    //   +-- credits.html\n    //   +-- nwjs.app\n    //     +-- Contents\n    //       +-- Resources\n    //         +-- app.icns (icon)\n    //         +-- app.nw\n    //           +-- (project data)\n    //       +-- MacOS\n    //         +-- nwjs (executable)\n    //       +-- ...\n\n    // the first folder, something like \"nwjs-v0.49.0-win-64\"\n    const nwjsPrefix = Object.keys(nwjsZip.files)[0].split('/')[0];\n\n    const zip = new (await getJSZip());\n\n    const packageName = this.options.app.packageName;\n\n    // Copy NW.js files to the right place\n    for (const path of Object.keys(nwjsZip.files)) {\n      const file = nwjsZip.files[path];\n\n      let newPath = path.replace(nwjsPrefix, packageName);\n      if (isWindows) {\n        newPath = newPath.replace('nw.exe', `${packageName}.exe`);\n      } else if (isMac) {\n        newPath = newPath.replace('nwjs.app', `${packageName}.app`);\n      } else if (isLinux) {\n        newPath = newPath.replace(/nw$/, packageName);\n      }\n\n      setFileFast(zip, newPath, file);\n    }\n\n    const ICON_NAME = 'icon.png';\n    const icon = await getAppIcon(this.options.app.icon);\n    const manifest = {\n      name: packageName,\n      main: 'main.js',\n      window: {\n        width: this.options.stageWidth,\n        height: this.options.stageHeight,\n        icon: ICON_NAME\n      }\n    };\n\n    let dataPrefix;\n    if (isWindows) {\n      dataPrefix = `${packageName}/`;\n    } else if (isMac) {\n      const icnsData = await pngToAppleICNS(icon);\n      zip.file(`${packageName}/${packageName}.app/Contents/Resources/app.icns`, icnsData);\n      dataPrefix = `${packageName}/${packageName}.app/Contents/Resources/app.nw/`;\n    } else if (isLinux) {\n      const startScript = `#!/bin/bash\ncd \"$(dirname \"$0\")\"\n./${packageName}`;\n      zip.file(`${packageName}/start.sh`, startScript, {\n        unixPermissions: 0o100755\n      });\n      dataPrefix = `${packageName}/`;\n    }\n\n    // Copy project files and extra NW.js files to the right place\n    for (const path of Object.keys(projectZip.files)) {\n      setFileFast(zip, dataPrefix + path, projectZip.files[path]);\n    }\n    zip.file(dataPrefix + ICON_NAME, icon);\n    zip.file(dataPrefix + 'package.json', JSON.stringify(manifest, null, 4));\n    zip.file(dataPrefix + 'main.js', `\n    const start = () => nw.Window.open('index.html', {\n      position: \"center\",\n      new_instance: true\n    });\n    nw.App.on('open', start);\n    start();`);\n\n    const creditsHtmlPath = `${packageName}/credits.html`;\n    const creditsHtml = await zip.file(creditsHtmlPath).async('string');\n    zip.file(creditsHtmlPath, creditsHtml + APPEND_TO_CREDITS_HTML);\n\n    return zip;\n  }\n\n  makeWebSocketProvider () {\n    return `new Scaffolding.Cloud.WebSocketProvider(${JSON.stringify(this.options.cloudVariables.cloudHost)}, ${JSON.stringify(this.options.projectId)})`;\n  }\n\n  makeLocalStorageProvider () {\n    return `new Scaffolding.Cloud.LocalStorageProvider()`;\n  }\n\n  makeCustomProvider () {\n    const variables = this.options.cloudVariables.custom;\n    let result = '{const providers = {};\\n';\n    for (const provider of new Set(Object.values(variables))) {\n      if (provider === 'ws') {\n        result += `providers.ws = ${this.makeWebSocketProvider()};\\n`;\n      } else if (provider === 'local') {\n        result += `providers.local = ${this.makeLocalStorageProvider()};\\n`;\n      }\n    }\n    result += 'for (const provider of Object.values(providers)) scaffolding.addCloudProvider(provider);\\n';\n    for (const variableName of Object.keys(variables)) {\n      const providerToUse = variables[variableName];\n      result += `scaffolding.addCloudProviderOverride(${JSON.stringify(variableName)}, providers[${JSON.stringify(providerToUse)}] || null);\\n`;\n    }\n    result += '}';\n    return result;\n  }\n\n  generateFilename (extension) {\n    return `${this.options.app.windowTitle}.${extension}`;\n  }\n\n  async generateGetProjectData () {\n    if (this.options.target === 'html') {\n      const data = await readAsArrayBuffer(this.project.blob);\n      const base85 = encode(data);\n      return `<script id=\"p4-encoded-project-data\" type=\"p4-encoded-project-data\">${base85}</script>\n  <script>\n    setProgress(${PROGRESS_FETCHED_INLINE_DATA_BUT_NOT_LOADED});\n    const base85decode = ${decode.toString()};\n    const getProjectData = async () => {\n      const dataElement = document.getElementById(\"p4-encoded-project-data\");\n      const result = base85decode(dataElement.textContent);\n      dataElement.remove();\n      setProgress(${PROGRESS_WAITING_FOR_VM_LOAD});\n      return result;\n    };\n  </script>`\n    }\n    let src;\n    let progressWeight;\n    if (this.project.type === 'blob' || this.options.target === 'zip-one-asset') {\n      src = './project.zip';\n      progressWeight = PROGRESS_WAITING_FOR_VM_LOAD - PROGRESS_LOADED_SCRIPTS;\n    } else {\n      src = './assets/project.json';\n      progressWeight = PROGRESS_LOADED_JSON_BUT_NEED_ASSETS - PROGRESS_LOADED_SCRIPTS;\n    }\n    return `<script>\n    const getProjectData = () => new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.onload = () => {\n        resolve(xhr.response);\n      };\n      xhr.onerror = () => {\n        if (location.protocol === 'file:') {\n          reject(new Error(\"Zip environment must be used from a website, not from a file URL.\"));\n        } else {\n          reject(new Error(\"Request to load project data failed.\"));\n        }  \n      };\n      xhr.onprogress = (e) => {\n        if (e.lengthComputable) {\n          setProgress(${PROGRESS_LOADED_SCRIPTS} + (e.loaded / e.total) * ${progressWeight});\n        }\n      };\n      xhr.responseType = \"arraybuffer\";\n      xhr.open(\"GET\", ${JSON.stringify(src)});\n      xhr.send();\n    });\n  </script>`;\n  }\n\n  async generateFavicon () {\n    if (this.options.app.icon === null) {\n      return '<!-- no favicon -->';\n    }\n    const data = await readAsURL(this.options.app.icon);\n    return `<link rel=\"icon\" href=\"${data}\">`;\n  }\n\n  async package () {\n    await this.loadResources();\n    const html = `<!DOCTYPE html>\n<!-- Created with https://packager.turbowarp.org/ -->\n<html>\n<head>\n  <meta charset=\"utf8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n  <!-- We only include this to explicitly loosen the CSP of various packager environments. It does not provide any security. -->\n  <meta http-equiv=\"Content-Security-Policy\" content=\"default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:\">\n  <title>${escapeXML(this.options.app.windowTitle)}</title>\n  <style>\n    body {\n      background-color: ${this.options.appearance.background};\n      color: ${this.options.appearance.foreground};\n      font-family: sans-serif;\n      overflow: hidden;\n    }\n    [hidden] {\n      display: none !important;\n    }\n    h1 {\n      font-weight: normal;\n    }\n    a {\n      color: inherit;\n      text-decoration: underline;\n      cursor: pointer;\n    }\n\n    #app, #loading, #error, #launch {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n    }\n    .screen {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      text-align: center;\n      cursor: default;\n      user-select: none;\n      -webkit-user-select: none;\n      background-color: ${this.options.appearance.background};\n    }\n    #launch {\n      background-color: rgba(0, 0, 0, 0.7);\n      cursor: pointer;\n    }\n    .green-flag {\n      width: 80px;\n      height: 80px;\n      padding: 16px;\n      border-radius: 100%;\n      background: rgba(255, 255, 255, 0.75);\n      border: 3px solid hsla(0, 100%, 100%, 1);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      box-sizing: border-box;\n    }\n    .progress-bar-outer {\n      border: 1px solid currentColor;\n      height: 10px;\n      width: 200px;\n      max-width: 200px;\n    }\n    .progress-bar-inner {\n      height: 100%;\n      width: 0;\n      background-color: currentColor;\n    }\n    .loading-text {\n      font-weight: normal;\n      font-size: 36px;\n      margin: 0 0 16px;\n    }\n    #error-info {\n      font-family: monospace;\n    }\n    .control-button {\n      width: 2rem;\n      height: 2rem;\n      padding: 0.375rem;\n      border-radius: 0.25rem;\n      margin-top: 0.5rem;\n      margin-bottom: 0.5rem;\n      user-select: none;\n      -webkit-user-select: none;\n      cursor: pointer;\n      border: 0;\n      border-radius: 4px;\n    }\n    .control-button:hover {\n      background: ${this.options.appearance.accent}26;\n    }\n    .control-button.active {\n      background: ${this.options.appearance.accent}59;\n    }\n    .fullscreen-button {\n      background: white !important;\n    }\n    .standalone-fullscreen-button {\n      position: absolute;\n      top: 0;\n      right: 0;\n      background-color: rgba(0, 0, 0, 0.5);\n      border-radius: 0 0 0 4px;\n      padding: 4px;\n      cursor: pointer;\n    }\n  </style>\n  <meta name=\"theme-color\" content=\"${this.options.appearance.background}\">\n  ${await this.generateFavicon()}\n</head>\n<body>\n  <noscript>Enable JavaScript</noscript>\n\n  <div id=\"app\"></div>\n\n  <div id=\"launch\" class=\"screen\" hidden title=\"Click to start\">\n    <div class=\"green-flag\">\n      <svg viewBox=\"0 0 16.63 17.5\" width=\"42\" height=\"44\">\n        <defs><style>.cls-1,.cls-2{fill:#4cbf56;stroke:#45993d;stroke-linecap:round;stroke-linejoin:round;}.cls-2{stroke-width:1.5px;}</style></defs>\n        <path class=\"cls-1\" d=\"M.75,2A6.44,6.44,0,0,1,8.44,2h0a6.44,6.44,0,0,0,7.69,0V12.4a6.44,6.44,0,0,1-7.69,0h0a6.44,6.44,0,0,0-7.69,0\"/>\n        <line class=\"cls-2\" x1=\"0.75\" y1=\"16.75\" x2=\"0.75\" y2=\"0.75\"/>\n      </svg>\n    </div>\n  </div>\n\n  <div id=\"loading\" class=\"screen\">\n    ${this.options.loadingScreen.text ? `<h1 class=\"loading-text\">${escapeXML(this.options.loadingScreen.text)}</h1>` : ''}\n    <div class=\"progress-bar-outer\"><div class=\"progress-bar-inner\" id=\"loading-inner\"></div></div>\n  </div>\n\n  <div id=\"error\" class=\"screen\" hidden>\n    <h1>Error</h1>\n    <p>Something went wrong.</p>\n    <p id=\"error-info\"></p>\n  </div>\n\n  ${this.options.target === 'html' ? `<script>${this.script}</script>` : '<script src=\"script.js\"></script>'}\n  <script>\n    const appElement = document.getElementById('app');\n    const launchScreen = document.getElementById('launch');\n    const loadingScreen = document.getElementById('loading');\n    const loadingInner = document.getElementById('loading-inner');\n    const errorScreen = document.getElementById('error');\n    const errorScreenInfo = document.getElementById('error-info');\n\n    const handleError = (error) => {\n      console.error(error);\n      if (!errorScreen.hidden) return;\n      errorScreen.hidden = false;\n      errorScreenInfo.textContent = '' + error;\n    };\n    const setProgress = (progress) => {\n      loadingInner.style.width = progress * 100 + \"%\";\n    };\n\n    try {\n      const scaffolding = new Scaffolding.Scaffolding();\n      scaffolding.width = ${this.options.stageWidth};\n      scaffolding.height = ${this.options.stageHeight};\n      scaffolding.setup();\n      scaffolding.appendTo(appElement);\n  \n      if (typeof ScaffoldingAddons !== \"undefined\") ScaffoldingAddons.run(scaffolding);\n  \n      // Expose values expected by third-party plugins\n      window.scaffolding = scaffolding;\n      window.vm = scaffolding.vm;\n  \n      const {storage, vm} = scaffolding;\n      storage.addWebStore(\n        [storage.AssetType.ImageVector, storage.AssetType.ImageBitmap, storage.AssetType.Sound],\n        (asset) => new URL(\"./assets/\" + asset.assetId + \".\" + asset.dataFormat, location).href\n      );\n      storage.onprogress = (total, loaded) => {\n        setProgress(${PROGRESS_LOADED_JSON_BUT_NEED_ASSETS} + (loaded / total) * ${1 - PROGRESS_LOADED_JSON_BUT_NEED_ASSETS});\n      };\n      setProgress(${PROGRESS_LOADED_SCRIPTS});\n  \n      scaffolding.setUsername(${JSON.stringify(this.options.username)}.replace(/#/g, () => Math.floor(Math.random() * 10)));\n      scaffolding.setAccentColor(${JSON.stringify(this.options.appearance.accent)});\n  \n      ${this.options.cloudVariables.mode === 'ws' ?\n        `scaffolding.addCloudProvider(${this.makeWebSocketProvider()})` :\n        this.options.cloudVariables.mode === 'local' ?\n        `scaffolding.addCloudProvider(${this.makeLocalStorageProvider()})` :\n        this.options.cloudVariables.mode === 'custom' ?\n        this.makeCustomProvider() :\n        '/* no-op */'\n      };\n  \n      if (${this.options.controls.greenFlag.enabled}) {\n        const greenFlagButton = document.createElement(\"img\");\n        greenFlagButton.src = 'data:image/svg+xml,' + encodeURIComponent('<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16.63 17.5\"><path d=\"M.75 2a6.44 6.44 0 017.69 0h0a6.44 6.44 0 007.69 0v10.4a6.44 6.44 0 01-7.69 0h0a6.44 6.44 0 00-7.69 0\" fill=\"#4cbf56\" stroke=\"#45993d\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/><path stroke-width=\"1.5\" fill=\"#4cbf56\" stroke=\"#45993d\" stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M.75 16.75v-16\"/></svg>');\n        greenFlagButton.className = 'control-button';\n        greenFlagButton.addEventListener('click', () => {\n          scaffolding.greenFlag();\n        });\n        scaffolding.addEventListener('PROJECT_RUN_START', () => {\n          greenFlagButton.classList.add('active');\n        });\n        scaffolding.addEventListener('PROJECT_RUN_STOP', () => {\n          greenFlagButton.classList.remove('active');\n        });\n        scaffolding.addControlButton({\n          element: greenFlagButton,\n          where: 'top-left'\n        });\n      }\n  \n      if (${this.options.controls.stopAll.enabled}) {\n        const stopAllButton = document.createElement(\"img\");\n        stopAllButton.src = 'data:image/svg+xml,' + encodeURIComponent('<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 14\"><path fill=\"#ec5959\" stroke=\"#b84848\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M4.3.5h5.4l3.8 3.8v5.4l-3.8 3.8H4.3L.5 9.7V4.3z\"/></svg>');\n        stopAllButton.className = 'control-button';\n        stopAllButton.addEventListener('click', () => {\n          scaffolding.stopAll();\n        });\n        scaffolding.addControlButton({\n          element: stopAllButton,\n          where: 'top-left'\n        });\n      }\n  \n      if (${this.options.controls.fullscreen.enabled} && (document.fullscreenEnabled || document.webkitFullscreenEnabled)) {\n        let isFullScreen = !!(document.fullscreenElement || document.webkitFullscreenElement);\n        const fullscreenButton = document.createElement('img');\n        fullscreenButton.className = 'control-button fullscreen-button';\n        fullscreenButton.addEventListener('click', () => {\n          if (isFullScreen) {\n            if (document.exitFullscreen) {\n              document.exitFullscreen();\n            } else if (document.webkitExitFullscreen) {\n              document.webkitExitFullscreen();\n            }\n          } else {\n            if (document.body.requestFullscreen) {\n              document.body.requestFullscreen()\n            } else if (document.body.webkitRequestFullscreen) {\n              document.body.webkitRequestFullscreen();\n            }\n          }\n        });\n        const otherControlsExist = ${this.options.controls.greenFlag.enabled || this.options.controls.stopAll.enabled};\n        const fillColor = otherControlsExist ? '#575E75' : '${this.options.appearance.foreground}';\n        const updateFullScreen = () => {\n          isFullScreen = !!(document.fullscreenElement || document.webkitFullscreenElement);\n          if (isFullScreen) {\n            fullscreenButton.src = 'data:image/svg+xml,' + encodeURIComponent('<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"' + fillColor + '\" fill-rule=\"evenodd\"><path d=\"M12.662 3.65l.89.891 3.133-2.374a.815.815 0 011.15.165.819.819 0 010 .986L15.467 6.46l.867.871c.25.25.072.664-.269.664L12.388 8A.397.397 0 0112 7.611V3.92c0-.341.418-.514.662-.27M7.338 16.35l-.89-.89-3.133 2.374a.817.817 0 01-1.15-.166.819.819 0 010-.985l2.37-3.143-.87-.871a.387.387 0 01.27-.664L7.612 12a.397.397 0 01.388.389v3.692a.387.387 0 01-.662.27M7.338 3.65l-.89.891-3.133-2.374a.815.815 0 00-1.15.165.819.819 0 000 .986l2.37 3.142-.87.871a.387.387 0 00.27.664L7.612 8A.397.397 0 008 7.611V3.92a.387.387 0 00-.662-.27M12.662 16.35l.89-.89 3.133 2.374a.817.817 0 001.15-.166.819.819 0 000-.985l-2.368-3.143.867-.871a.387.387 0 00-.269-.664L12.388 12a.397.397 0 00-.388.389v3.692c0 .342.418.514.662.27\"/></g></svg>');\n          } else {\n            fullscreenButton.src = 'data:image/svg+xml,' + encodeURIComponent('<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"' + fillColor + '\" fill-rule=\"evenodd\"><path d=\"M16.338 7.35l-.89-.891-3.133 2.374a.815.815 0 01-1.15-.165.819.819 0 010-.986l2.368-3.142-.867-.871a.387.387 0 01.269-.664L16.612 3a.397.397 0 01.388.389V7.08a.387.387 0 01-.662.27M3.662 12.65l.89.89 3.133-2.374a.817.817 0 011.15.166.819.819 0 010 .985l-2.37 3.143.87.871c.248.25.071.664-.27.664L3.388 17A.397.397 0 013 16.611V12.92c0-.342.418-.514.662-.27M3.662 7.35l.89-.891 3.133 2.374a.815.815 0 001.15-.165.819.819 0 000-.986L6.465 4.54l.87-.871a.387.387 0 00-.27-.664L3.388 3A.397.397 0 003 3.389V7.08c0 .341.418.514.662.27M16.338 12.65l-.89.89-3.133-2.374a.817.817 0 00-1.15.166.819.819 0 000 .985l2.368 3.143-.867.871a.387.387 0 00.269.664l3.677.005a.397.397 0 00.388-.389V12.92a.387.387 0 00-.662-.27\"/></g></svg>');\n          }\n        };\n        updateFullScreen();\n        document.addEventListener('fullscreenchange', updateFullScreen);\n        document.addEventListener('webkitfullscreenchange', updateFullScreen);\n        if (otherControlsExist) {\n          fullscreenButton.className = 'control-button fullscreen-button';\n          scaffolding.addControlButton({\n            element: fullscreenButton,\n            where: 'top-right'\n          });\n        } else {\n          fullscreenButton.className = 'standalone-fullscreen-button';\n          document.body.appendChild(fullscreenButton);\n        }\n      }\n  \n      vm.setTurboMode(${this.options.turbo});\n      vm.setInterpolation(${this.options.interpolation});\n      vm.setFramerate(${this.options.framerate});\n      vm.renderer.setUseHighQualityRender(${this.options.highQualityPen});\n      vm.setRuntimeOptions({\n        fencing: ${this.options.fencing},\n        miscLimits: ${this.options.miscLimits},\n        maxClones: ${this.options.maxClones},\n      });\n      vm.setCompilerOptions({\n        enabled: ${this.options.compiler.enabled},\n        warpTimer: ${this.options.compiler.warpTimer}\n      });\n  \n      for (const extension of ${JSON.stringify(this.options.extensions.map(i => i.url))}) {\n        vm.extensionManager.loadExtensionURL(extension);\n      }\n    } catch (e) {\n      handleError(e);\n    }\n\n    // NW.js hook\n    if (typeof nw !== 'undefined') {\n      const win = nw.Window.get();\n      win.on('new-win-policy', (frame, url, policy) => {\n        policy.ignore();\n        nw.Shell.openExternal(url);\n      });\n      win.on('navigation', (frame, url, policy) => {\n        policy.ignore();\n        nw.Shell.openExternal(url);\n      });\n      document.addEventListener(\"keydown\", (e) => {\n        if (e.key === \"Escape\" && document.fullscreenElement) {\n          document.exitFullscreen();\n        }\n      });\n    }\n    ${this.options.custom.js}\n  </script>\n  ${await this.generateGetProjectData()}\n  <script>\n    const run = async () => {\n      const projectData = await getProjectData();\n      await scaffolding.loadProject(projectData);\n      setProgress(1);\n      loadingScreen.hidden = true;\n      if (${this.options.autoplay}) {\n        scaffolding.start();\n      } else {\n        launchScreen.hidden = false;\n        launchScreen.addEventListener('click', () => {\n          launchScreen.hidden = true;\n          scaffolding.start();\n        });\n        launchScreen.focus();\n      }\n    };\n    run().catch(handleError);\n  </script>\n</body>\n</html>\n`;\n\n    if (this.options.target !== 'html') {\n      let zip;\n      if (this.project.type === 'sb3' && this.options.target !== 'zip-one-asset') {\n        zip = await (await getJSZip()).loadAsync(this.project.blob);\n        for (const file of Object.keys(zip.files)) {\n          zip.files[`assets/${file}`] = zip.files[file];\n          delete zip.files[file];\n        }\n      } else {\n        zip = new (await getJSZip());\n        zip.file('project.zip', this.project.blob);\n      }\n      zip.file('index.html', html);\n      zip.file('script.js', this.script);\n\n      if (this.options.target.startsWith('nwjs-')) {\n        zip = await this.addNwJS(zip);\n      }\n\n      return {\n        blob: await zip.generateAsync({\n          type: 'blob',\n          compression: 'DEFLATE',\n          // Use UNIX permissions so that executable bits are properly set for macOS and Linux\n          platform: 'UNIX'\n        }, (meta) => {\n          this.dispatchEvent(new CustomEvent('zip-progress', {\n            detail: {\n              progress: meta.percent / 100\n            }\n          }));\n        }),\n        filename: this.generateFilename('zip')\n      };\n    }\n    return {\n      blob: new Blob([html], {\n        type: 'text/html'\n      }),\n      filename: this.generateFilename('html')\n    };\n  }\n}\n\nPackager.getDefaultPackageNameFromFileName = (title) => {\n  // Remove file extension\n  title = title.split('.')[0];\n  title = title.replace(/[^\\-a-z ]/gi, '');\n  title = title.trim();\n  title = title.replace(/ /g, '-');\n  return title.toLowerCase() || 'packaged-project';\n};\n\nPackager.getWindowTitleFromFileName = (title) => {\n  title = title.trim();\n  title = title.split('.')[0];\n  return title || 'Packaged Project';\n};\n\nPackager.DEFAULT_OPTIONS = () => ({\n  turbo: false,\n  interpolation: false,\n  framerate: 30,\n  highQualityPen: false,\n  maxClones: 300,\n  fencing: true,\n  miscLimits: true,\n  stageWidth: 480,\n  stageHeight: 360,\n  autoplay: false,\n  username: 'player####',\n  custom: {\n    js: ''\n  },\n  appearance: {\n    background: '#000000',\n    foreground: '#ffffff',\n    accent: '#ff4c4c'\n  },\n  loadingScreen: {\n    text: ''\n  },\n  controls: {\n    greenFlag: {\n      enabled: false,\n    },\n    stopAll: {\n      enabled: false,\n    },\n    fullscreen: {\n      enabled: false\n    }\n  },\n  compiler: {\n    enabled: true,\n    warpTimer: false\n  },\n  target: 'html',\n  app: {\n    icon: null,\n    packageName: Packager.getDefaultPackageNameFromFileName(''),\n    windowTitle: Packager.getWindowTitleFromFileName('')\n  },\n  chunks: {\n    gamepad: false\n  },\n  cloudVariables: {\n    mode: 'ws',\n    id: 0,\n    cloudHost: 'wss://clouddata.turbowarp.org',\n    custom: {}\n  },\n  extensions: []\n});\n\nexport default Packager;\n","import {writable} from 'svelte/store';\nimport Database from './lib/idb';\n\nconst DATABASE_NAME = 'p4-local-settings';\nconst DATABASE_VERSION = 1;\nconst STORE_NAME = 'blobs';\n\nconst db = new Database(DATABASE_NAME, DATABASE_VERSION, STORE_NAME);\n\nconst get = async (key) => {\n  const {transaction, store} = await db.createTransaction('readonly');\n  return new Promise((resolve, reject) => {\n    Database.setTransactionErrorHandler(transaction, reject);\n    const request = store.get(key);\n    request.onsuccess = (e) => {\n      const result = e.target.result;\n      if (result) {\n        resolve(result.data);\n      } else {\n        resolve(null);\n      }\n    };\n  });\n};\n\nconst set = async (key, value) => {\n  const {transaction, store} = await db.createTransaction('readwrite');\n  return new Promise((resolve, reject) => {\n    Database.setTransactionErrorHandler(transaction, reject);\n    const request = value ? store.put({\n      id: key,\n      data: value\n    }) : store.delete(key);\n    request.onsuccess = () => {\n      resolve();\n    };\n  });\n};\n\nconst resetAll = () => db.deleteEverything();\n\nconst writableFileStore = (key) => {\n  let hasQueried = false;\n  const store = writable(null, () => {\n    const unsubscribe = store.subscribe((file) => {\n      if (hasQueried) {\n        set(key, file)\n          .catch((err) => {\n            console.warn(err);\n          });\n      }\n    });\n    return unsubscribe;\n  });\n  get(key)\n    .then((value) => {\n      hasQueried = true;\n      if (value) {\n        store.set(value);\n      }\n    });\n  return store;\n};\n\nexport default {\n  writableFileStore,\n  resetAll\n};\n","const source = `<!DOCTYPE html>\n<html>\n<head>\n  <title>Loading Preview</title>\n  <meta charset=\"utf8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n  <style>\n  body {\n    background: black;\n    color: white;\n    font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  }\n  .preview-message {\n    background: inherit;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    justify-content: center;\n    text-align: center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    user-select: none;\n    -webkit-user-select: none;\n  }\n  .preview-progress-outer {\n    width: 200px;\n    height: 10px;\n    border: 1px solid white;\n  }\n  .preview-progress-inner {\n    height: 100%;\n    width: 0;\n    background: white;\n  }\n  [hidden] {\n    display: none;\n  }\n  </style>\n</head>\n<body>\n  <div class=\"preview-message\">\n    <div class=\"preview-progress-outer\"><div class=\"preview-progress-inner\"></div></div>\n  </div>\n  <div class=\"preview-message preview-error\" hidden>\n    <div class=\"preview-error-message\"></div>\n    <div>Go back to the original tab and try again</div>\n  </div>\n  <script>\n  (function() {\n    const err = (message) => {\n      document.querySelector(\".preview-error\").hidden = false;\n      document.querySelector(\".preview-error-message\").textContent = \"Error: \" + message;\n    };\n    if (!window.opener) {\n      err(\"window.opener is missing\");\n      return;\n    }\n    let hasRun = false;\n    const progressBar = document.querySelector(\".preview-progress-inner\");\n    const progressText = document.querySelector(\".preview-progress-text\");\n    window.addEventListener(\"message\", (e) => {\n      if (e.origin !== location.origin) return;\n      if (hasRun) return;\n      if (e.data.blob) {\n        hasRun = true;\n        const fr = new FileReader();\n        fr.onload = () => {\n          document.open();\n          document.write(fr.result);\n          document.close(); // fixes poor performance in firefox\n        };\n        fr.onerror = () => {\n          err(\"Something went wrong reading the file\");\n        };\n        fr.readAsText(e.data.blob);\n      }\n      if (typeof e.data.progress === \"number\") {\n        progressBar.style.width = (e.data.progress * 100) + \"%\";\n      }\n    });\n    window.opener.postMessage({\n      preview: \"hello\"\n    }, location.origin);\n  })();\n  </script>\n</body>\n</html>\n`;\nconst previewURL = URL.createObjectURL(new Blob([source], {\n  type: 'text/html'\n})) + '#do-not-share-this-link-it-will-not-work-for-others';\n\nconst windowToBlobMap = new WeakMap();\n\nclass Preview {\n  constructor () {\n    this.window = window.open(previewURL);\n    if (!this.window) {\n      throw new Error('Cannot open popup');\n    }\n  }\n\n  setContent (content) {\n    windowToBlobMap.set(this.window, content);\n    this.window.postMessage({\n      blob: content\n    }, location.origin);\n  }\n\n  setProgress (progress, text) {\n    this.window.postMessage({\n      progress,\n      text\n    }, location.origin);\n  }\n\n  close () {\n    this.window.close();\n  }\n}\n\nwindow.addEventListener('message', (e) => {\n  if (e.origin !== location.origin) {\n    return;\n  }\n  const data = e.data;\n  if (data.preview === 'hello') {\n    const source = e.source;\n    const blob = windowToBlobMap.get(source);\n    if (blob) {\n      source.postMessage({\n        blob\n      }, location.origin);\n    }\n  }\n});\n\nexport default Preview;\n","const deepClone = (obj) => {\n  if (obj instanceof Blob) {\n    return obj;\n  }\n  if (Array.isArray(obj)) {\n    const result = [];\n    for (const value of obj) {\n      result.push(deepClone(value));\n    }\n    return result;\n  }\n  if (obj && typeof obj === 'object') {\n    // TODO: there's probably some prototype pollution in here\n    const result = {};\n    for (const key of Object.keys(obj)) {\n      result[key] = deepClone(obj[key]);\n    }\n    return result;\n  }\n  // Primitive type\n  return obj;\n};\n\nexport default deepClone;\n","<script>\n  import {onDestroy} from 'svelte';\n  import {_} from '../locales/';\n  import {slide, fade} from 'svelte/transition';\n  import Section from './Section.svelte';\n  import Button from './Button.svelte';\n  import ComplexMessage from './ComplexMessage.svelte';\n  import ImageInput from './ImageInput.svelte';\n  import CustomExtensions from './CustomExtensions.svelte';\n  import Packager from './packager';\n  import writablePersistentStore from './persistent-store';\n  import fileStore from './file-store';\n  import {error, progress} from './stores';\n  import Preview from './preview';\n  import deepClone from './lib/deep-clone';\n  import assetCache from './cache';\n\n  export let projectData;\n\n  // JSON can't easily parse Infinity, so we'll just store large numbers instead\n  const ALMOST_INFINITY = 9999999999;\n\n  const cloudVariables = Object.values(projectData.project.analysis.stageVariables)\n    .filter(i => i.isCloud)\n    .map(i => i.name);\n\n  const defaultOptions = Packager.DEFAULT_OPTIONS();\n  defaultOptions.projectId = projectData.projectId || `p4-${projectData.uniqueId}`;\n  for (const variable of cloudVariables) {\n    defaultOptions.cloudVariables.custom[variable] = 'ws';\n  }\n  defaultOptions.app.packageName = Packager.getDefaultPackageNameFromFileName(projectData.title);\n  defaultOptions.app.windowTitle = Packager.getWindowTitleFromFileName(projectData.title);\n  const options = writablePersistentStore(`PackagerOptions.${projectData.uniqueId}`, defaultOptions);\n\n  let result = null;\n  let url = null;\n\n  let previewer = null;\n  $: if (previewer) {\n    previewer.setProgress($progress.progress, $progress.text);\n  }\n\n  const icon = fileStore.writableFileStore(`PackagerOptions.icon.${projectData.uniqueId}`);\n  $: $options.app.icon = $icon;\n\n  const handleLargeAssetFetchProgress = ({detail}) => {\n    if (detail.asset.startsWith('nwjs-')) {\n      $progress.text = $_('progress.loadingNwjs');\n    }\n    $progress.progress = detail.progress;\n  };\n\n  const handleZipProgress = ({detail}) => {\n    $progress.text = $_('progress.compressingProject');\n    $progress.progress = detail.progress;\n  };\n\n  const downloadURL = (filename, url) => {\n    const link = document.createElement('a');\n    link.download = filename;\n    link.href = url;\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n  };\n\n  const runPackager = async (options) => {\n    try {\n      const packager = new Packager();\n      packager.options = options;\n      packager.project = projectData.project;\n\n      $progress.visible = true;\n      $progress.text = $_('progress.loadingScripts');\n\n      if (url) {\n        URL.revokeObjectURL(url);\n      }\n      result = null;\n      url = null;\n\n      packager.addEventListener('large-asset-fetch', handleLargeAssetFetchProgress);\n      packager.addEventListener('zip-progress', handleZipProgress);\n\n      result = await packager.package();\n      url = URL.createObjectURL(result.blob);\n    } catch (e) {\n      $error = e;\n    }\n    progress.reset();\n  };\n\n  const pack = async () => {\n    await runPackager(deepClone($options));\n    if (result) {\n      downloadURL(result.filename, url);\n    }\n  };\n\n  const preview = async () => {\n    previewer = new Preview();\n    const optionsClone = deepClone($options);\n    optionsClone.target = 'html';\n    await runPackager(optionsClone);\n    if (result) {\n      previewer.setContent(result.blob);\n    } else {\n      previewer.close();\n    }\n    previewer = null;\n  };\n\n  const reset = async () => {\n    if (confirm($_('options.confirmReload'))) {\n      try {\n        await assetCache.resetAll();\n        await fileStore.resetAll();\n      } catch (e) {\n        console.warn(e);\n      }\n      localStorage.clear();\n      location.reload();\n    }\n  };\n\n  onDestroy(() => {\n    if (url) {\n      URL.revokeObjectURL(url);\n    }\n  });\n</script>\n\n<style>\n  label {\n    display: block;\n    margin-bottom: 4px;\n  }\n  input[type=number] {\n    width: 60px;\n  }\n  input[type=text] {\n    width: 150px;\n  }\n  textarea {\n    display: block;\n    height: 100px;\n    width: 100%;\n    box-sizing: border-box;\n    height: 200px;\n  }\n  .environment-section {\n    margin-bottom: 12px;\n  }\n  .downloads {\n    text-align: center;\n  }\n</style>\n\n<Section accent=\"#FFAB19\">\n  <h2>{$_('options.runtimeOptions')}</h2>\n\n  <!-- TODO: this is not ideal, the help should be in here -->\n  <!-- especially as not all of these options are actually in advanced settings on the main site -->\n  <p>\n    <ComplexMessage\n      message={$_('options.moreHelp')}\n      values={{\n        turbowarp: {\n          text: 'TurboWarp',\n          href: 'https://turbowarp.org/'\n        }\n      }}\n    />\n  </p>\n\n  <label>\n    <input type=\"checkbox\" bind:checked={$options.turbo}>\n    {$_('options.turbo')}\n  </label>\n  <label>\n    {$_('options.framerate')}\n    <input type=\"number\" min=\"0\" max=\"240\" bind:value={$options.framerate}>\n  </label>\n  <label>\n    <input type=\"checkbox\" bind:checked={$options.interpolation}>\n    {$_('options.interpolation')}\n  </label>\n  <label>\n    <input type=\"checkbox\" bind:checked={$options.highQualityPen}>\n    {$_('options.highQualityPen')}\n  </label>\n  <label>\n    <input type=\"checkbox\" checked={$options.maxClones === ALMOST_INFINITY} on:change={(e) => {\n      $options.maxClones = e.target.checked ? ALMOST_INFINITY : 300;\n    }}>\n    {$_('options.infiniteClones')}\n  </label>\n  <label>\n    <input type=\"checkbox\" checked={!$options.fencing} on:change={(e) => {\n      $options.fencing = !e.target.checked;\n    }}>\n    {$_('options.removeFencing')}\n  </label>\n  <label>\n    <input type=\"checkbox\" checked={!$options.miscLimits} on:change={(e) => {\n      $options.miscLimits = !e.target.checked;\n    }}>\n    {$_('options.removeMiscLimits')}\n  </label>\n  <label>\n    {$_('options.stageSize')}\n    <input type=\"number\" min=\"0\" max=\"4096\" step=\"1\" bind:value={$options.stageWidth}>\n    &times;\n    <input type=\"number\" min=\"0\" max=\"4096\" step=\"1\" bind:value={$options.stageHeight}>\n  </label>\n  <label>\n    {$_('options.username')}\n    <input type=\"text\" bind:value={$options.username}>\n  </label>\n  <label>\n    <input type=\"checkbox\" bind:checked={$options.autoplay}>\n    {$_('options.autoplay')}\n  </label>\n</Section>\n\n<Section accent=\"#9966FF\">\n  <h2>{$_('options.playerOptions')}</h2>\n\n  <label>\n    {$_('options.pageTitle')}\n    <input type=\"text\" bind:value={$options.app.windowTitle}>\n  </label>\n  <label>\n    {$_('options.loadingScreenText')}\n    <input type=\"text\" bind:value={$options.loadingScreen.text} placeholder={$_('options.loadingScreenTextPlaceholder')}>\n  </label>\n  <div>\n    {$_('options.icon')}\n    <ImageInput bind:file={$icon} />\n  </div>\n\n  <h3>{$_('options.controls')}</h3>\n  <label>\n    <input type=\"checkbox\" bind:checked={$options.controls.greenFlag.enabled}>\n    {$_('options.showFlag')}\n  </label>\n  <label>\n    <input type=\"checkbox\" bind:checked={$options.controls.stopAll.enabled}>\n    {$_('options.showStop')}\n  </label>\n  <label>\n    <input type=\"checkbox\" bind:checked={$options.controls.fullscreen.enabled}>\n    {$_('options.showFullscreen')}\n  </label>\n  <p>{$_('options.controlsHelp')}</p>\n\n  <h3>{$_('options.colors')}</h3>\n  <label>\n    <input type=\"color\" bind:value={$options.appearance.background}>\n    {$_('options.backgroundColor')}\n  </label>\n  <label>\n    <input type=\"color\" bind:value={$options.appearance.foreground}>\n    {$_('options.foregroundColor')}\n  </label>\n  <label>\n    <input type=\"color\" bind:value={$options.appearance.accent}>\n    {$_('options.accentColor')}\n  </label>\n\n  <h3>{$_('options.addons')}</h3>\n  <label>\n    <input type=\"checkbox\" bind:checked={$options.chunks.gamepad}>\n    {$_('options.gamepadSupport')}\n  </label>\n</Section>\n\n{#if cloudVariables.length > 0}\n  <Section accent=\"#FF8C1A\">\n    <h2>{$_('options.cloudVariables')}</h2>\n    <label>\n      {$_('options.mode')}\n      <select bind:value={$options.cloudVariables.mode}>\n        <option value=\"ws\">{$_('options.cloudVariables-ws')}</option>\n        <option value=\"local\">{$_('options.cloudVariables-local')}</option>\n        <option value=\"\">{$_('options.cloudVariables-ignore')}</option>\n        <option value=\"custom\">{$_('options.cloudVariables-custom')}</option>\n      </select>\n    </label>\n    {#if $options.cloudVariables.mode === \"custom\"}\n      <div transition:slide|local>\n        {#each cloudVariables as variable}\n          <label>\n            <select bind:value={$options.cloudVariables.custom[variable]}>\n              <option value=\"ws\">{$_('options.cloudVariables-ws')}</option>\n              <option value=\"local\">{$_('options.cloudVariables-local')}</option>\n              <option value=\"\">{$_('options.cloudVariables-ignore')}</option>\n            </select>\n            {variable}\n          </label>\n        {/each}\n      </div>\n    {/if}\n    {#if $options.cloudVariables.mode === 'ws' || $options.cloudVariables.mode === 'custom'}\n      <label transition:slide|local>\n        {$_('options.cloudVariablesHost')}\n        <input type=\"text\" bind:value={$options.cloudVariables.cloudHost}>\n      </label>\n    {/if}\n    <p>{$_('options.cloudVariables-ws-help')}</p>\n    <p>{$_('options.cloudVariables-local-help')}</p>\n    <p>{$_('options.cloudVariables-ignore-help')}</p>\n    <p>{$_('options.cloudVariables-custom-help')}</p>\n  </Section>\n{/if}\n\n<Section accent=\"#FF6680\">\n  <h2>{$_('options.advancedOptions')}</h2>\n  <details>\n    <summary>{$_('options.advancedSummary')}</summary>\n    <label>\n      <input type=\"checkbox\" bind:checked={$options.compiler.enabled}>\n      {$_('options.enableCompiler')}\n    </label>\n    <label>\n      <input type=\"checkbox\" bind:checked={$options.compiler.warpTimer}>\n      {$_('options.warpTimer')}\n    </label>\n    <!-- Ignore because CustomExtensions will have a <textarea> inside it -->\n    <!-- svelte-ignore a11y-label-has-associated-control -->\n    <label>\n      {$_('options.customExtensions')}\n      <CustomExtensions bind:value={$options.extensions} />\n    </label>\n    <label>\n      {$_('options.customJS')}\n      <textarea bind:value={$options.custom.js}></textarea>\n    </label>\n  </details>\n</Section>\n\n<Section accent=\"#0FBD8C\">\n  <h2>{$_('options.environment')}</h2>\n  <div class=\"environment-section\">\n    <label>\n      <input type=\"radio\" bind:group={$options.target} value=\"html\">\n      {$_('options.html')}\n    </label>\n  </div>\n  <div class=\"environment-section\">\n    <label>\n      <input type=\"radio\" bind:group={$options.target} value=\"zip\">\n      {$_('options.zip')}\n    </label>\n    <label>\n      <input type=\"radio\" bind:group={$options.target} value=\"zip-one-asset\">\n      {$_('options.zip-one-asset')}\n    </label>\n  </div>\n  <div class=\"environment-section\">\n    <label>\n      <input type=\"radio\" bind:group={$options.target} value=\"nwjs-win32\">\n      {$_('options.nwjs-win32')}\n    </label>\n    <label>\n      <input type=\"radio\" bind:group={$options.target} value=\"nwjs-win64\">\n      {$_('options.nwjs-win64')}\n    </label>\n    <label>\n      <input type=\"radio\" bind:group={$options.target} value=\"nwjs-mac\">\n      {$_('options.nwjs-mac')}\n    </label>\n    <label>\n      <input type=\"radio\" bind:group={$options.target} value=\"nwjs-linux-x64\">\n      {$_('options.nwjs-linux64')}\n    </label>\n  </div>\n</Section>\n\n{#if $options.target.startsWith('nwjs-')}\n  <div in:fade|local>\n    <Section accent=\"#FF661A\">\n      <!-- don't translate NW.js -->\n      <h2>NW.js</h2>\n      <label>\n        {$_('options.packageName')}\n        <input type=\"text\" bind:value={$options.app.packageName}>\n      </label>\n\n      {#if $options.target.startsWith('nwjs-win')}\n        <div>\n          <h2>{$_('nwjs.furtherStepsWin')}</h2>\n          <p>To change the executable icon or create an installer program, download and run <a href=\"https://github.com/TurboWarp/packager-extras/releases\">TurboWarp Packager Extras</a> and select the output of this website.</p>\n        </div>\n      {:else if $options.target === 'nwjs-mac'}\n        <h2>{$_('nwjs.furtherStepsMac')}</h2>\n        <p>macOS support is still experimental.</p>\n        <p>Due to Apple policy, packaging for their platforms is rather troublesome. You either have to:</p>\n        <ul>\n          <li>Pay Apple $100/year for a developer account to sign and notarize the app (we do not have a tutorial for this as we can't afford that and don't want to support such practices), or</li>\n          <li>Instruct users to ignore Gatekeeper by opening Finder > Navigating to the application > Right click > Open > Open again</li>\n        </ul>\n        <p>NW.js runs natively on Intel Macs but will use Rosetta on Apple silicon Macs.</p>\n        <p>For further help and steps, see <a href=\"https://docs.nwjs.io/en/latest/For%20Users/Package%20and%20Distribute/#mac-os-x\">NW.js Documentation</a>.</p>\n      {:else if $options.target.startsWith('nwjs-linux')}\n        <h2>{$_('nwjs.furtherStepsLinux')}</h2>\n        <p>Linux support is still experimental.</p>\n        <p>For further help and steps, see <a href=\"https://docs.nwjs.io/en/latest/For%20Users/Package%20and%20Distribute/#linux\">NW.js Documentation</a>.</p>\n      {/if}\n    </Section>\n  </div>\n{/if}\n\n<Section>\n  <Button on:click={pack} disabled={$progress.visible} text={$_('options.package')} />\n  <Button on:click={preview} disabled={$progress.visible} secondary text={$_('options.preview')} />\n  <Button on:click={reset} danger text={$_('options.reset')} />\n</Section>\n\n{#if result && url}\n  <Section>\n    <div class=\"downloads\">\n      <a href={url} download={result.filename}>\n        {$_('options.download')\n          .replace('{filename}', result.filename)\n          .replace('{size}', (result.blob.size / 1000 / 1000).toFixed(2))}\n    </div>\n  </Section>\n{:else if !$progress.visible}\n  <Section caption>\n    <p>{$_('options.downloadsWillAppearHere')}</p>\n  </Section>\n{/if}\n","<script>\n  export let progress = 0;\n  export let text = '';\n</script>\n\n<style>\n  .progress {\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n  }\n  .bar-outer {\n    width: 200px;\n    height: 10px;\n    border: 1px solid currentColor;\n    margin-bottom: 4px;\n    background: black;\n  }\n  :global([theme=\"dark\"]) .bar-outer {\n    background: transparent;\n  }\n  .bar-inner {\n    height: 100%;\n    width: 0;\n    background: white;\n  }\n  .text {\n    font-style: italic;\n  }\n</style>\n\n<div class=\"progress\">\n  <div class=\"bar-outer\">\n    <div class=\"bar-inner\" style={`width:${progress*100}%`}></div>\n  </div>\n  <div class=\"text\">\n    {text}\n  </div>\n</div>\n\n","<script>\n  import {locale, supportedLocales} from '../locales/index';\n</script>\n\n<select bind:value={$locale}>\n  {#each Object.entries(supportedLocales) as [locale, {name}]}\n    <option value={locale}>{name}</option>\n  {/each}\n</select>\n","<script>\n  import {_} from '../locales/';\n  import ComplexMessage from './ComplexMessage.svelte';\n  import {fade} from 'svelte/transition';\n  import Section from './Section.svelte';\n  import SelectProject from './SelectProject.svelte';\n  import PackagerOptions from './PackagerOptions.svelte';\n  import Progress from './Progress.svelte';\n  import Button from './Button.svelte';\n  import SelectLocale from './SelectLocale.svelte';\n  import {error, progress} from './stores';\n  import {UserError} from './errors';\n  import {APP_NAME, FEEDBACK_GITHUB, FEEDBACK_SCRATCH, SOURCE_CODE} from './brand';\n\n  let projectData;\n\n  const darkMedia = window.matchMedia('(prefers-color-scheme: dark)');\n  let theme = darkMedia.matches ? 'dark' : 'light';\n  if (darkMedia.addEventListener) {\n    darkMedia.addEventListener('change', () => {\n      theme = darkMedia.matches ? 'dark' : 'light';\n    });\n  }\n  $: document.body.setAttribute('theme', theme);\n  document.body.setAttribute('p4-loaded', '');\n\n  $: if ($error) {\n    document.body.setAttribute('modal-visible', '');\n    console.error($error);\n  } else {\n    document.body.removeAttribute('modal-visible');\n  }\n\n  const closeModal = () => {\n    $error = null;\n  };\n  const onKeyDown = (e) => {\n    if (e.key === 'Escape') {\n      closeModal();\n    }\n  };\n</script>\n\n<style>\n  :global([theme=\"dark\"]) {\n    background: #111;\n    color: #eee;\n    color-scheme: dark;\n  }\n  :global(a) {\n    color: blue;\n  }\n  :global(a:active) {\n    color: red;\n  }\n  :global([theme=\"dark\"]) :global(a) {\n    color: #4af;\n  }\n  :global([modal-visible]) {\n    overflow: hidden;\n  }\n  :global(p), :global(h1), :global(h2) {\n    margin: 12px 0;\n  }\n  main {\n    font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n    padding-bottom: 10px;\n  }\n  footer {\n    text-align: center;\n  }\n  .modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: rgba(0, 0, 0, 0.75);\n  }\n  footer > div {\n    margin-top: 8px;\n  }\n</style>\n\n<svelte:window on:keydown={onKeyDown} />\n\n<main>\n  <Section accent=\"#ff4c4c\">\n    <h1>{APP_NAME}</h1>\n    <p>{$_('p4.description1')}</p>\n    <p>\n      <ComplexMessage\n        message={$_('p4.description2')}\n        values={{\n          embedding: {\n            text: $_('p4.description2-embedding'),\n            href: 'https://docs.turbowarp.org/embedding'\n          }\n        }}\n      />\n    </p>\n    <p>\n      <ComplexMessage\n        message={$_('p4.description3')}\n        values={{\n          onScratch: {\n            text: $_('p4.description3-scratch'),\n            href: FEEDBACK_SCRATCH\n          },\n          onGitHub: {\n            text: $_('p4.description3-github'),\n            href: FEEDBACK_GITHUB\n          }\n        }}\n      />\n    </p>\n  </Section>\n\n  <SelectProject bind:projectData />\n\n  {#if projectData}\n    <div in:fade>\n      <PackagerOptions projectData={projectData} />\n    </div>\n  {/if}\n\n  {#if $error}\n    <div class=\"modal\" on:click|self={closeModal} on:key>\n      <Section modal>\n        <h2>{$_('p4.error')}</h2>\n        {#if $error instanceof UserError}\n          <p>{$error.message}</p>\n          <p>\n            <Button on:click={closeModal} text={$_('p4.close')} />\n          </p>\n        {:else}\n          <p>\n            {$_('p4.errorMessage').replace('{error}', $error)}\n          </p>\n          <p>\n            <Button on:click={closeModal} text={$_('p4.close')} />\n            <a href={FEEDBACK_SCRATCH}>{$_('p4.reportBug')}</a>\n          </p>\n        {/if}\n      </Section>\n    </div>\n  {/if}\n\n  {#if $progress.visible}\n    <Section>\n      <Progress progress={$progress.progress} text={$progress.text} />\n    </Section>\n  {/if}\n\n  <footer>\n    <div>\n      <a href=\"privacy.html\">{$_('p4.privacy')}</a>\n      -\n      <a href={FEEDBACK_SCRATCH}>{$_('p4.feedback')}</a>\n      -\n      <a href={SOURCE_CODE}>{$_('p4.sourceCode')}</a>\n    </div>\n    <div>\n      <a href=\"https://fosshost.org/\">{$_('p4.fosshost')}</a>\n    </div>\n    <div>\n      <SelectLocale />\n    </div>\n  </footer>\n</main>\n","export default __webpack_public_path__ + \"sw.js\";","const PLAUSIBLE_API = process.env.PLAUSIBLE_API;\nconst PLAUSIBLE_DOMAIN = process.env.PLAUSIBLE_DOMAIN;\nconst enabled =\n  PLAUSIBLE_API &&\n  PLAUSIBLE_DOMAIN &&\n  (location.protocol === 'http:' || location.protocol === 'https:') &&\n  location.hostname === PLAUSIBLE_DOMAIN &&\n  navigator.doNotTrack !== '1';\n\nconst sendEvent = eventName => {\n  if (!enabled) {\n    return;\n  }\n  setTimeout(() => {\n    const xhr = new XMLHttpRequest();\n    xhr.open('POST', PLAUSIBLE_API, true);\n    xhr.setRequestHeader('Content-Type', 'text/plain');\n    xhr.send(JSON.stringify({\n      n: eventName,\n      u: location.origin,\n      d: PLAUSIBLE_DOMAIN,\n      r: null\n    }));\n  });\n};\n\nsendEvent('pageview');\n\nexport default {\n  sendEvent\n};\n","import P4 from './P4.svelte';\nimport serviceWorker from '!!file-loader?name=sw.js!./sw.js';\nimport './analytics';\n\nconst app = new P4({\n  target: document.getElementById('app')\n});\n\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register(serviceWorker)\n    .then(() => {\n      console.log('SW registered');\n    }).catch((error) => {\n      console.log('SW error', error);\n    });\n}\n"],"sourceRoot":""}